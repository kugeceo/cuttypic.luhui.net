import{r as te,a as Mt,g as xt,R as Wt,c as Se}from"./vendor-b1zo4zab.js";import{_ as Ae,a as Ke,b as Ye,c as nt}from"./transformers-bosqbixw.js";(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))y(d);new MutationObserver(d=>{for(const n of d)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&y(s)}).observe(document,{childList:!0,subtree:!0});function t(d){const n={};return d.integrity&&(n.integrity=d.integrity),d.referrerPolicy&&(n.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?n.credentials="include":d.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function y(d){if(d.ep)return;d.ep=!0;const n=t(d);fetch(d.href,n)}})();var vt={exports:{}},Ze={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=te,Gt=Symbol.for("react.element"),$t=Symbol.for("react.fragment"),Ht=Object.prototype.hasOwnProperty,Kt=Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Yt={key:!0,ref:!0,__self:!0,__source:!0};function yt(i,b,t){var y,d={},n=null,s=null;t!==void 0&&(n=""+t),b.key!==void 0&&(n=""+b.key),b.ref!==void 0&&(s=b.ref);for(y in b)Ht.call(b,y)&&!Yt.hasOwnProperty(y)&&(d[y]=b[y]);if(i&&i.defaultProps)for(y in b=i.defaultProps,b)d[y]===void 0&&(d[y]=b[y]);return{$$typeof:Gt,type:i,key:n,ref:s,props:d,_owner:Kt.current}}Ze.Fragment=$t;Ze.jsx=yt;Ze.jsxs=yt;vt.exports=Ze;var o=vt.exports,wt,it=Mt;wt=it.createRoot,it.hydrateRoot;var _t={exports:{}},Vt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",qt=Vt,Jt=qt;function kt(){}function jt(){}jt.resetWarningCache=kt;var Xt=function(){function i(y,d,n,s,a,f){if(f!==Jt){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}i.isRequired=i;function b(){return i}var t={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:b,element:i,elementType:i,instanceOf:b,node:i,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:jt,resetWarningCache:kt};return t.PropTypes=t,t};_t.exports=Xt();var Qt=_t.exports;const fe=xt(Qt);function Ie(i,b,t,y){function d(n){return n instanceof t?n:new t(function(s){s(n)})}return new(t||(t=Promise))(function(n,s){function a(w){try{u(y.next(w))}catch(v){s(v)}}function f(w){try{u(y.throw(w))}catch(v){s(v)}}function u(w){w.done?n(w.value):d(w.value).then(a,f)}u((y=y.apply(i,b||[])).next())})}function Oe(i,b){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},y,d,n,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(w){return f([u,w])}}function f(u){if(y)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(y=1,d&&(n=u[0]&2?d.return:u[0]?d.throw||((n=d.return)&&n.call(d),0):d.next)&&!(n=n.call(d,u[1])).done)return n;switch(d=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,d=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){t.label=u[1];break}if(u[0]===6&&t.label<n[1]){t.label=n[1],n=u;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(u);break}n[2]&&t.ops.pop(),t.trys.pop();continue}u=b.call(i,t)}catch(w){u=[6,w],d=0}finally{y=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function at(i,b){var t=typeof Symbol=="function"&&i[Symbol.iterator];if(!t)return i;var y=t.call(i),d,n=[],s;try{for(;(b===void 0||b-- >0)&&!(d=y.next()).done;)n.push(d.value)}catch(a){s={error:a}}finally{try{d&&!d.done&&(t=y.return)&&t.call(y)}finally{if(s)throw s.error}}return n}function st(i,b,t){if(t||arguments.length===2)for(var y=0,d=b.length,n;y<d;y++)(n||!(y in b))&&(n||(n=Array.prototype.slice.call(b,0,y)),n[y]=b[y]);return i.concat(n||Array.prototype.slice.call(b))}var er=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Pe(i,b){var t=tr(i);if(typeof t.path!="string"){var y=i.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof b=="string"?b:typeof y=="string"&&y.length>0?y:i.name,writable:!1,configurable:!1,enumerable:!0})}return t}function tr(i){var b=i.name,t=b&&b.lastIndexOf(".")!==-1;if(t&&!i.type){var y=b.split(".").pop().toLowerCase(),d=er.get(y);d&&Object.defineProperty(i,"type",{value:d,writable:!1,configurable:!1,enumerable:!0})}return i}var rr=[".DS_Store","Thumbs.db"];function nr(i){return Ie(this,void 0,void 0,function(){return Oe(this,function(b){return Ue(i)&&ir(i.dataTransfer)?[2,lr(i.dataTransfer,i.type)]:ar(i)?[2,sr(i)]:Array.isArray(i)&&i.every(function(t){return"getFile"in t&&typeof t.getFile=="function"})?[2,or(i)]:[2,[]]})})}function ir(i){return Ue(i)}function ar(i){return Ue(i)&&Ue(i.target)}function Ue(i){return typeof i=="object"&&i!==null}function sr(i){return Ve(i.target.files).map(function(b){return Pe(b)})}function or(i){return Ie(this,void 0,void 0,function(){var b;return Oe(this,function(t){switch(t.label){case 0:return[4,Promise.all(i.map(function(y){return y.getFile()}))];case 1:return b=t.sent(),[2,b.map(function(y){return Pe(y)})]}})})}function lr(i,b){return Ie(this,void 0,void 0,function(){var t,y;return Oe(this,function(d){switch(d.label){case 0:return i.items?(t=Ve(i.items).filter(function(n){return n.kind==="file"}),b!=="drop"?[2,t]:[4,Promise.all(t.map(cr))]):[3,2];case 1:return y=d.sent(),[2,ot(At(y))];case 2:return[2,ot(Ve(i.files).map(function(n){return Pe(n)}))]}})})}function ot(i){return i.filter(function(b){return rr.indexOf(b.name)===-1})}function Ve(i){if(i===null)return[];for(var b=[],t=0;t<i.length;t++){var y=i[t];b.push(y)}return b}function cr(i){if(typeof i.webkitGetAsEntry!="function")return lt(i);var b=i.webkitGetAsEntry();return b&&b.isDirectory?St(b):lt(i)}function At(i){return i.reduce(function(b,t){return st(st([],at(b),!1),at(Array.isArray(t)?At(t):[t]),!1)},[])}function lt(i){var b=i.getAsFile();if(!b)return Promise.reject("".concat(i," is not a File"));var t=Pe(b);return Promise.resolve(t)}function dr(i){return Ie(this,void 0,void 0,function(){return Oe(this,function(b){return[2,i.isDirectory?St(i):ur(i)]})})}function St(i){var b=i.createReader();return new Promise(function(t,y){var d=[];function n(){var s=this;b.readEntries(function(a){return Ie(s,void 0,void 0,function(){var f,u,w;return Oe(this,function(v){switch(v.label){case 0:if(a.length)return[3,5];v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all(d)];case 2:return f=v.sent(),t(f),[3,4];case 3:return u=v.sent(),y(u),[3,4];case 4:return[3,6];case 5:w=Promise.all(a.map(dr)),d.push(w),n(),v.label=6;case 6:return[2]}})})},function(a){y(a)})}n()})}function ur(i){return Ie(this,void 0,void 0,function(){return Oe(this,function(b){return[2,new Promise(function(t,y){i.file(function(d){var n=Pe(d,i.fullPath);t(n)},function(d){y(d)})})]})})}var fr=function(i,b){if(i&&b){var t=Array.isArray(b)?b:b.split(","),y=i.name||"",d=(i.type||"").toLowerCase(),n=d.replace(/\/.*$/,"");return t.some(function(s){var a=s.trim().toLowerCase();return a.charAt(0)==="."?y.toLowerCase().endsWith(a):a.endsWith("/*")?n===a.replace(/\/.*$/,""):d===a})}return!0};function ct(i){return mr(i)||pr(i)||Nt(i)||hr()}function hr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pr(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function mr(i){if(Array.isArray(i))return qe(i)}function dt(i,b){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);b&&(y=y.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),t.push.apply(t,y)}return t}function ut(i){for(var b=1;b<arguments.length;b++){var t=arguments[b]!=null?arguments[b]:{};b%2?dt(Object(t),!0).forEach(function(y){Et(i,y,t[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(t,y))})}return i}function Et(i,b,t){return b in i?Object.defineProperty(i,b,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[b]=t,i}function Fe(i,b){return xr(i)||br(i,b)||Nt(i,b)||gr()}function gr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nt(i,b){if(i){if(typeof i=="string")return qe(i,b);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return qe(i,b)}}function qe(i,b){(b==null||b>i.length)&&(b=i.length);for(var t=0,y=new Array(b);t<b;t++)y[t]=i[t];return y}function br(i,b){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var y=[],d=!0,n=!1,s,a;try{for(t=t.call(i);!(d=(s=t.next()).done)&&(y.push(s.value),!(b&&y.length===b));d=!0);}catch(f){n=!0,a=f}finally{try{!d&&t.return!=null&&t.return()}finally{if(n)throw a}}return y}}function xr(i){if(Array.isArray(i))return i}var vr="file-invalid-type",yr="file-too-large",wr="file-too-small",_r="too-many-files",kr=function(b){b=Array.isArray(b)&&b.length===1?b[0]:b;var t=Array.isArray(b)?"one of ".concat(b.join(", ")):b;return{code:vr,message:"File type must be ".concat(t)}},ft=function(b){return{code:yr,message:"File is larger than ".concat(b," ").concat(b===1?"byte":"bytes")}},ht=function(b){return{code:wr,message:"File is smaller than ".concat(b," ").concat(b===1?"byte":"bytes")}},jr={code:_r,message:"Too many files"};function Ct(i,b){var t=i.type==="application/x-moz-file"||fr(i,b);return[t,t?null:kr(b)]}function It(i,b,t){if(Ne(i.size))if(Ne(b)&&Ne(t)){if(i.size>t)return[!1,ft(t)];if(i.size<b)return[!1,ht(b)]}else{if(Ne(b)&&i.size<b)return[!1,ht(b)];if(Ne(t)&&i.size>t)return[!1,ft(t)]}return[!0,null]}function Ne(i){return i!=null}function Ar(i){var b=i.files,t=i.accept,y=i.minSize,d=i.maxSize,n=i.multiple,s=i.maxFiles,a=i.validator;return!n&&b.length>1||n&&s>=1&&b.length>s?!1:b.every(function(f){var u=Ct(f,t),w=Fe(u,1),v=w[0],g=It(f,y,d),l=Fe(g,1),_=l[0],c=a?a(f):null;return v&&_&&!c})}function Me(i){return typeof i.isPropagationStopped=="function"?i.isPropagationStopped():typeof i.cancelBubble<"u"?i.cancelBubble:!1}function Be(i){return i.dataTransfer?Array.prototype.some.call(i.dataTransfer.types,function(b){return b==="Files"||b==="application/x-moz-file"}):!!i.target&&!!i.target.files}function pt(i){i.preventDefault()}function Sr(i){return i.indexOf("MSIE")!==-1||i.indexOf("Trident/")!==-1}function Er(i){return i.indexOf("Edge/")!==-1}function Nr(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Sr(i)||Er(i)}function we(){for(var i=arguments.length,b=new Array(i),t=0;t<i;t++)b[t]=arguments[t];return function(y){for(var d=arguments.length,n=new Array(d>1?d-1:0),s=1;s<d;s++)n[s-1]=arguments[s];return b.some(function(a){return!Me(y)&&a&&a.apply(void 0,[y].concat(n)),Me(y)})}}function Cr(){return"showOpenFilePicker"in window}function Ir(i){if(Ne(i)){var b=Object.entries(i).filter(function(t){var y=Fe(t,2),d=y[0],n=y[1],s=!0;return Ot(d)||(console.warn('Skipped "'.concat(d,'" because it is not a valid MIME type. Check http://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(n)||!n.every(zt))&&(console.warn('Skipped "'.concat(d,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(t,y){var d=Fe(y,2),n=d[0],s=d[1];return ut(ut({},t),{},Et({},n,s))},{});return[{description:"Files",accept:b}]}return i}function Or(i){if(Ne(i))return Object.entries(i).reduce(function(b,t){var y=Fe(t,2),d=y[0],n=y[1];return[].concat(ct(b),[d],ct(n))},[]).filter(function(b){return Ot(b)||zt(b)}).join(",")}function zr(i){return i instanceof DOMException&&(i.name==="AbortError"||i.code===i.ABORT_ERR)}function Dr(i){return i instanceof DOMException&&(i.name==="SecurityError"||i.code===i.SECURITY_ERR)}function Ot(i){return i==="audio/*"||i==="video/*"||i==="image/*"||i==="text/*"||/\w+\/[-+.\w]+/g.test(i)}function zt(i){return/^.*\.[\w]+$/.test(i)}var Rr=["children"],Fr=["open"],Pr=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Tr=["refKey","onChange","onClick"];function Br(i){return Mr(i)||Ur(i)||Dt(i)||Lr()}function Lr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Mr(i){if(Array.isArray(i))return Je(i)}function $e(i,b){return Gr(i)||Zr(i,b)||Dt(i,b)||Wr()}function Wr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dt(i,b){if(i){if(typeof i=="string")return Je(i,b);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Je(i,b)}}function Je(i,b){(b==null||b>i.length)&&(b=i.length);for(var t=0,y=new Array(b);t<b;t++)y[t]=i[t];return y}function Zr(i,b){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var y=[],d=!0,n=!1,s,a;try{for(t=t.call(i);!(d=(s=t.next()).done)&&(y.push(s.value),!(b&&y.length===b));d=!0);}catch(f){n=!0,a=f}finally{try{!d&&t.return!=null&&t.return()}finally{if(n)throw a}}return y}}function Gr(i){if(Array.isArray(i))return i}function mt(i,b){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(i);b&&(y=y.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),t.push.apply(t,y)}return t}function me(i){for(var b=1;b<arguments.length;b++){var t=arguments[b]!=null?arguments[b]:{};b%2?mt(Object(t),!0).forEach(function(y){Xe(i,y,t[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):mt(Object(t)).forEach(function(y){Object.defineProperty(i,y,Object.getOwnPropertyDescriptor(t,y))})}return i}function Xe(i,b,t){return b in i?Object.defineProperty(i,b,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[b]=t,i}function We(i,b){if(i==null)return{};var t=$r(i,b),y,d;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);for(d=0;d<n.length;d++)y=n[d],!(b.indexOf(y)>=0)&&Object.prototype.propertyIsEnumerable.call(i,y)&&(t[y]=i[y])}return t}function $r(i,b){if(i==null)return{};var t={},y=Object.keys(i),d,n;for(n=0;n<y.length;n++)d=y[n],!(b.indexOf(d)>=0)&&(t[d]=i[d]);return t}var tt=te.forwardRef(function(i,b){var t=i.children,y=We(i,Rr),d=Ft(y),n=d.open,s=We(d,Fr);return te.useImperativeHandle(b,function(){return{open:n}},[n]),Wt.createElement(te.Fragment,null,t(me(me({},s),{},{open:n})))});tt.displayName="Dropzone";var Rt={disabled:!1,getFilesFromEvent:nr,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};tt.defaultProps=Rt;tt.propTypes={children:fe.func,accept:fe.objectOf(fe.arrayOf(fe.string)),multiple:fe.bool,preventDropOnDocument:fe.bool,noClick:fe.bool,noKeyboard:fe.bool,noDrag:fe.bool,noDragEventsBubbling:fe.bool,minSize:fe.number,maxSize:fe.number,maxFiles:fe.number,disabled:fe.bool,getFilesFromEvent:fe.func,onFileDialogCancel:fe.func,onFileDialogOpen:fe.func,useFsAccessApi:fe.bool,autoFocus:fe.bool,onDragEnter:fe.func,onDragLeave:fe.func,onDragOver:fe.func,onDrop:fe.func,onDropAccepted:fe.func,onDropRejected:fe.func,onError:fe.func,validator:fe.func};var Qe={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Ft(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},b=me(me({},Rt),i),t=b.accept,y=b.disabled,d=b.getFilesFromEvent,n=b.maxSize,s=b.minSize,a=b.multiple,f=b.maxFiles,u=b.onDragEnter,w=b.onDragLeave,v=b.onDragOver,g=b.onDrop,l=b.onDropAccepted,_=b.onDropRejected,c=b.onFileDialogCancel,m=b.onFileDialogOpen,h=b.useFsAccessApi,k=b.autoFocus,A=b.preventDropOnDocument,N=b.noClick,E=b.noKeyboard,M=b.noDrag,P=b.noDragEventsBubbling,H=b.onError,O=b.validator,U=te.useMemo(function(){return Or(t)},[t]),q=te.useMemo(function(){return Ir(t)},[t]),j=te.useMemo(function(){return typeof m=="function"?m:gt},[m]),T=te.useMemo(function(){return typeof c=="function"?c:gt},[c]),r=te.useRef(null),B=te.useRef(null),ae=te.useReducer(Hr,Qe),K=$e(ae,2),se=K[0],G=K[1],re=se.isFocused,D=se.isFileDialogActive,z=te.useRef(typeof window<"u"&&window.isSecureContext&&h&&Cr()),ne=function(){!z.current&&D&&setTimeout(function(){if(B.current){var F=B.current.files;F.length||(G({type:"closeDialog"}),T())}},300)};te.useEffect(function(){return window.addEventListener("focus",ne,!1),function(){window.removeEventListener("focus",ne,!1)}},[B,D,T,z]);var J=te.useRef([]),V=function(F){r.current&&r.current.contains(F.target)||(F.preventDefault(),J.current=[])};te.useEffect(function(){return A&&(document.addEventListener("dragover",pt,!1),document.addEventListener("drop",V,!1)),function(){A&&(document.removeEventListener("dragover",pt),document.removeEventListener("drop",V))}},[r,A]),te.useEffect(function(){return!y&&k&&r.current&&r.current.focus(),function(){}},[r,k,y]);var ue=te.useCallback(function(R){H?H(R):console.error(R)},[H]),W=te.useCallback(function(R){R.preventDefault(),R.persist(),Z(R),J.current=[].concat(Br(J.current),[R.target]),Be(R)&&Promise.resolve(d(R)).then(function(F){if(!(Me(R)&&!P)){var Q=F.length,le=Q>0&&Ar({files:F,accept:U,minSize:s,maxSize:n,multiple:a,maxFiles:f,validator:O}),ie=Q>0&&!le;G({isDragAccept:le,isDragReject:ie,isDragActive:!0,type:"setDraggedFiles"}),u&&u(R)}}).catch(function(F){return ue(F)})},[d,u,ue,P,U,s,n,a,f,O]),X=te.useCallback(function(R){R.preventDefault(),R.persist(),Z(R);var F=Be(R);if(F&&R.dataTransfer)try{R.dataTransfer.dropEffect="copy"}catch{}return F&&v&&v(R),!1},[v,P]),ee=te.useCallback(function(R){R.preventDefault(),R.persist(),Z(R);var F=J.current.filter(function(le){return r.current&&r.current.contains(le)}),Q=F.indexOf(R.target);Q!==-1&&F.splice(Q,1),J.current=F,!(F.length>0)&&(G({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Be(R)&&w&&w(R))},[r,w,P]),de=te.useCallback(function(R,F){var Q=[],le=[];R.forEach(function(ie){var be=Ct(ie,U),ye=$e(be,2),xe=ye[0],_e=ye[1],he=It(ie,s,n),ke=$e(he,2),Ee=ke[0],ve=ke[1],Ce=O?O(ie):null;if(xe&&Ee&&!Ce)Q.push(ie);else{var ze=[_e,ve];Ce&&(ze=ze.concat(Ce)),le.push({file:ie,errors:ze.filter(function(Ge){return Ge})})}}),(!a&&Q.length>1||a&&f>=1&&Q.length>f)&&(Q.forEach(function(ie){le.push({file:ie,errors:[jr]})}),Q.splice(0)),G({acceptedFiles:Q,fileRejections:le,type:"setFiles"}),g&&g(Q,le,F),le.length>0&&_&&_(le,F),Q.length>0&&l&&l(Q,F)},[G,a,U,s,n,f,g,l,_,O]),oe=te.useCallback(function(R){R.preventDefault(),R.persist(),Z(R),J.current=[],Be(R)&&Promise.resolve(d(R)).then(function(F){Me(R)&&!P||de(F,R)}).catch(function(F){return ue(F)}),G({type:"reset"})},[d,de,ue,P]),ce=te.useCallback(function(){if(z.current){G({type:"openDialog"}),j();var R={multiple:a,types:q};window.showOpenFilePicker(R).then(function(F){return d(F)}).then(function(F){de(F,null),G({type:"closeDialog"})}).catch(function(F){zr(F)?(T(F),G({type:"closeDialog"})):Dr(F)?(z.current=!1,B.current?(B.current.value=null,B.current.click()):ue(new Error("Cannot open the file picker because the http://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):ue(F)});return}B.current&&(G({type:"openDialog"}),j(),B.current.value=null,B.current.click())},[G,j,T,h,de,ue,q,a]),pe=te.useCallback(function(R){!r.current||!r.current.isEqualNode(R.target)||(R.key===" "||R.key==="Enter"||R.keyCode===32||R.keyCode===13)&&(R.preventDefault(),ce())},[r,ce]),e=te.useCallback(function(){G({type:"focus"})},[]),L=te.useCallback(function(){G({type:"blur"})},[]),C=te.useCallback(function(){N||(Nr()?setTimeout(ce,0):ce())},[N,ce]),x=function(F){return y?null:F},p=function(F){return E?null:x(F)},S=function(F){return M?null:x(F)},Z=function(F){P&&F.stopPropagation()},$=te.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.refKey,Q=F===void 0?"ref":F,le=R.role,ie=R.onKeyDown,be=R.onFocus,ye=R.onBlur,xe=R.onClick,_e=R.onDragEnter,he=R.onDragOver,ke=R.onDragLeave,Ee=R.onDrop,ve=We(R,Pr);return me(me(Xe({onKeyDown:p(we(ie,pe)),onFocus:p(we(be,e)),onBlur:p(we(ye,L)),onClick:x(we(xe,C)),onDragEnter:S(we(_e,W)),onDragOver:S(we(he,X)),onDragLeave:S(we(ke,ee)),onDrop:S(we(Ee,oe)),role:typeof le=="string"&&le!==""?le:"presentation"},Q,r),!y&&!E?{tabIndex:0}:{}),ve)}},[r,pe,e,L,C,W,X,ee,oe,E,M,y]),I=te.useCallback(function(R){R.stopPropagation()},[]),Y=te.useMemo(function(){return function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},F=R.refKey,Q=F===void 0?"ref":F,le=R.onChange,ie=R.onClick,be=We(R,Tr),ye=Xe({accept:U,multiple:a,type:"file",style:{display:"none"},onChange:x(we(le,oe)),onClick:x(we(ie,I)),tabIndex:-1},Q,B);return me(me({},ye),be)}},[B,t,a,oe,y]);return me(me({},se),{},{isFocused:re&&!y,getRootProps:$,getInputProps:Y,rootRef:r,inputRef:B,open:x(ce)})}function Hr(i,b){switch(b.type){case"focus":return me(me({},i),{},{isFocused:!0});case"blur":return me(me({},i),{},{isFocused:!1});case"openDialog":return me(me({},Qe),{},{isFileDialogActive:!0});case"closeDialog":return me(me({},i),{},{isFileDialogActive:!1});case"setDraggedFiles":return me(me({},i),{},{isDragActive:b.isDragActive,isDragAccept:b.isDragAccept,isDragReject:b.isDragReject});case"setFiles":return me(me({},i),{},{acceptedFiles:b.acceptedFiles,fileRejections:b.fileRejections});case"reset":return me({},Qe);default:return i}}function gt(){}const Kr=[{id:"color",label:"纯色",icon:"fa-fill-drip"},{id:"pattern",label:"纹理",icon:"fa-shapes"},{id:"image",label:"图片",icon:"fa-image"}],Yr=[{id:"none",label:"无",icon:"fa-ban"},{id:"blur",label:"模糊",icon:"fa-droplet-slash"},{id:"brightness",label:"亮度",icon:"fa-sun"},{id:"contrast",label:"对比度",icon:"fa-circle-half-stroke"},{id:"filter",label:"滤镜",icon:"fa-photo-film"}],Vr=[{id:"none",label:"无"},{id:"sepia",label:"怀旧"},{id:"grayscale",label:"黑白"},{id:"invert",label:"反色"},{id:"cool",label:"冷色调"},{id:"warm",label:"暖色调"}],qr=["transparent","#ffffff","#000000","#ff0000","#00ff00","#0000ff","#ffff00","#00ffff","#ff00ff","#808080","#c0c0c0"],He=[{id:"checkerboard",label:"棋盘格",pattern:`
      <pattern id="checkerboard" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="10" height="10" fill="#f3f4f6"/>
        <rect x="10" y="10" width="10" height="10" fill="#f3f4f6"/>
        <rect x="10" y="0" width="10" height="10" fill="#e5e7eb"/>
        <rect x="0" y="10" width="10" height="10" fill="#e5e7eb"/>
      </pattern>
    `},{id:"dots",label:"圆点",pattern:`
      <pattern id="dots" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="20" height="20" fill="#f9fafb"/>
        <circle cx="5" cy="5" r="2" fill="#e5e7eb"/>
        <circle cx="15" cy="15" r="2" fill="#e5e7eb"/>
      </pattern>
    `},{id:"stripes",label:"条纹",pattern:`
      <pattern id="stripes" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="20" height="20" fill="#f9fafb"/>
        <rect y="5" width="20" height="1" fill="#e5e7eb"/>
        <rect y="15" width="20" height="1" fill="#e5e7eb"/>
      </pattern>
    `},{id:"crosshatch",label:"交叉线",pattern:`
      <pattern id="crosshatch" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="20" height="20" fill="#f9fafb"/>
        <path d="M0,0 L20,20" stroke="#e5e7eb" stroke-width="1"/>
        <path d="M20,0 L0,20" stroke="#e5e7eb" stroke-width="1"/>
      </pattern>
    `},{id:"zigzag",label:"锯齿形",pattern:`
      <pattern id="zigzag" patternUnits="userSpaceOnUse" width="20" height="10">
        <rect width="20" height="10" fill="#f9fafb"/>
        <path d="M0,0 L5,10 L10,0 L15,10 L20,0" stroke="#e5e7eb" stroke-width="1" fill="none"/>
      </pattern>
    `},{id:"grid",label:"网格",pattern:`
      <pattern id="grid" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="20" height="20" fill="#f9fafb"/>
        <path d="M0,0 L0,20 M0,0 L20,0 M20,0 L20,20 M0,20 L20,20" stroke="#e5e7eb" stroke-width="1"/>
      </pattern>
    `},{id:"honeycomb",label:"蜂窝",pattern:`
      <pattern id="honeycomb" patternUnits="userSpaceOnUse" width="30" height="30">
        <rect width="30" height="30" fill="#f9fafb"/>
        <path d="M0,15 L7.5,5 L22.5,5 L30,15 L22.5,25 L7.5,25 Z" stroke="#e5e7eb" stroke-width="1" fill="none"/>
      </pattern>
    `},{id:"triangles",label:"三角形",pattern:`
      <pattern id="triangles" patternUnits="userSpaceOnUse" width="20" height="20">
        <rect width="20" height="20" fill="#f9fafb"/>
        <path d="M0,0 L10,17.3 L20,0 Z" stroke="#e5e7eb" stroke-width="1" fill="none"/>
      </pattern>
    `}];function Pt({image:i,isOpen:b,onClose:t,onSave:y}){const[d,n]=te.useState("color"),[s,a]=te.useState("#ffffff"),[f,u]=te.useState("checkerboard"),[w,v]=te.useState(null),[g,l]=te.useState("none"),[_,c]=te.useState(50),[m,h]=te.useState(50),[k,A]=te.useState(50),[N,E]=te.useState("none"),[M,P]=te.useState(""),[H,O]=te.useState(!1),[U,q]=te.useState(null),[j,T]=te.useState(1),[r,B]=te.useState(null),[ae,K]=te.useState(null),[se,G]=te.useState(50),re=i.processedFile?URL.createObjectURL(i.processedFile):"";te.useEffect(()=>()=>{re&&URL.revokeObjectURL(re)},[re]),te.useEffect(()=>{i.processedFile&&D()},[i.processedFile]),te.useEffect(()=>{if(g==="brush"&&U.current&&i.processedFile){const W=U.current,X=W.getContext("2d");if(X){const ee=new Image;ee.src=re,ee.onload=()=>{W.width=ee.width,W.height=ee.height,X.drawImage(ee,0,0);const de=X.getImageData(0,0,W.width,W.height);if(setOriginalImageData(de),setEditedImageData(de),r.current){const oe=r.current.clientWidth,ce=ee.height/ee.width,pe=oe*ce,e=Math.min(Math.max(pe,400),700);r.current.style.height=`${e}px`}}}}},[g,re,i.processedFile]);const D=async()=>{if(!i.processedFile)return;const W=document.createElement("canvas"),X=W.getContext("2d");if(!X)return;const ee=new Image;ee.src=re,await new Promise(oe=>ee.onload=oe),W.width=ee.width,W.height=ee.height,X.drawImage(ee,0,0);const de=W.toDataURL("image/png");P(de)};te.useEffect(()=>{if(i.processedFile){const W=setTimeout(()=>{V()},300);return()=>clearTimeout(W)}},[d,s,f,w,g,_,m,k,N,se]);const z=()=>{switch(g){case"blur":return _;case"brightness":return m;case"contrast":return k;case"filter":return se;default:return 50}},ne=W=>{switch(g){case"blur":c(W);break;case"brightness":h(W);break;case"contrast":A(W);break;case"filter":G(W);break}},J=W=>{const X=`<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">
      <defs>`,ee=He.find(oe=>oe.id===W)?.pattern||"",de=`
      </defs>
      <rect width="100%" height="100%" fill="url(#${W})"/>
    </svg>`;return`url("data:image/svg+xml;base64,${btoa(X+ee+de)}")`},V=async()=>{if(!i.processedFile)return;const W=document.createElement("canvas"),X=W.getContext("2d");if(!X)return;const ee=new Image;if(ee.src=re,await new Promise(oe=>ee.onload=oe),W.width=ee.width,W.height=ee.height,d==="color")s==="transparent"||(X.fillStyle=s,X.fillRect(0,0,W.width,W.height));else if(d==="pattern"&&f){const oe=new Image,ce=`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100">
        <defs>
          ${He.find(e=>e.id===f)?.pattern||""}
        </defs>
        <rect width="100" height="100" fill="url(#${f})"/>
      </svg>`;oe.src="data:image/svg+xml;base64,"+btoa(ce),await new Promise(e=>oe.onload=e);const pe=X.createPattern(oe,"repeat");pe&&(X.fillStyle=pe,X.fillRect(0,0,W.width,W.height))}else if(d==="image"&&w){const oe=new Image;oe.src=URL.createObjectURL(w),await new Promise(ce=>oe.onload=ce),X.drawImage(oe,0,0,W.width,W.height)}if(X.drawImage(ee,0,0),g!=="none"){const oe=X.getImageData(0,0,W.width,W.height),ce=oe.data;switch(g){case"blur":const pe=document.createElement("canvas"),e=pe.getContext("2d");if(!e)break;pe.width=W.width,pe.height=W.height,e.drawImage(W,0,0),X.clearRect(0,0,W.width,W.height),X.filter=`blur(${_/10}px)`,X.drawImage(pe,0,0),X.filter="none";break;case"brightness":for(let C=0;C<ce.length;C+=4)ce[C]=Math.min(255,ce[C]*(m/50)),ce[C+1]=Math.min(255,ce[C+1]*(m/50)),ce[C+2]=Math.min(255,ce[C+2]*(m/50));X.putImageData(oe,0,0);break;case"contrast":const L=259*(k+255)/(255*(259-k));for(let C=0;C<ce.length;C+=4)ce[C]=L*(ce[C]-128)+128,ce[C+1]=L*(ce[C+1]-128)+128,ce[C+2]=L*(ce[C+2]-128)+128;X.putImageData(oe,0,0);break;case"filter":if(N!=="none"){const C=document.createElement("canvas"),x=C.getContext("2d");if(!x)break;C.width=W.width,C.height=W.height,x.drawImage(W,0,0),X.clearRect(0,0,W.width,W.height);const p=se/50;switch(N){case"sepia":X.filter=`sepia(${p*100}%)`;break;case"grayscale":X.filter=`grayscale(${p*100}%)`;break;case"invert":X.filter=`invert(${p*100}%)`;break;case"cool":X.filter=`hue-rotate(${p*180}deg)`;break;case"warm":X.filter=`sepia(${p*50}%) saturate(${100+p*50}%) hue-rotate(${-30*p}deg)`;break}X.drawImage(C,0,0),X.filter="none"}break}}const de=W.toDataURL("image/png");P(de)},ue=async()=>{await V(),y(M),t()};return b?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:`bg-white rounded-xl p-6 ${g==="brush"?"max-w-5xl":"max-w-4xl"} w-full max-h-[90vh] overflow-y-auto shadow-xl`,children:[o.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-gray-100 pb-4",children:[o.jsxs("h2",{className:"text-xl font-semibold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent flex items-center",children:[o.jsx("i",{className:"fas fa-wand-magic-sparkles text-pink-500 mr-2"}),"编辑图片"]}),o.jsx("button",{onClick:t,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 hover:text-gray-700 transition-colors",children:o.jsx("i",{className:"fas fa-times"})})]}),o.jsxs("div",{className:`grid ${g==="brush"?"grid-cols-3":"grid-cols-2"} gap-6`,children:[o.jsxs("div",{className:"space-y-6 col-span-1",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsxs("h3",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[o.jsx("i",{className:"fas fa-palette text-purple-500 mr-2"}),"背景"]}),o.jsx("div",{className:"flex gap-2 mb-4",children:Kr.map(W=>o.jsxs("button",{onClick:()=>n(W.id),className:`px-4 py-2 rounded-full flex items-center gap-1.5 transition-colors ${d===W.id?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:border-pink-300 hover:text-pink-500"}`,children:[o.jsx("i",{className:`fas ${W.icon}`}),W.label]},W.id))}),d==="color"&&o.jsxs("div",{children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:qr.map(W=>o.jsx("button",{onClick:()=>a(W),className:`w-8 h-8 rounded-full border-2 transition-transform hover:scale-110 ${s===W?"border-pink-500 transform scale-110":"border-gray-200"}`,style:{backgroundColor:W==="transparent"?"transparent":W,backgroundImage:W==="transparent"?"linear-gradient(45deg, #ccc 25%, transparent 25%), linear-gradient(-45deg, #ccc 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #ccc 75%), linear-gradient(-45deg, transparent 75%, #ccc 75%)":"none",backgroundSize:"10px 10px",backgroundPosition:"0 0, 0 5px, 5px -5px, -5px 0px"}},W))}),o.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[o.jsxs("button",{onClick:()=>O(!H),className:"px-3 py-1.5 bg-white border border-gray-200 rounded-full hover:border-pink-300 hover:text-pink-500 transition-colors text-sm text-gray-700 flex items-center gap-1",children:[o.jsx("i",{className:"fas fa-eye-dropper text-purple-500"}),"自定义颜色"]}),H&&o.jsx("input",{type:"color",value:s,onChange:W=>a(W.target.value),className:"w-8 h-8 border-0 rounded-md cursor-pointer"})]})]}),d==="pattern"&&o.jsx("div",{className:"grid grid-cols-4 gap-2",children:He.map(W=>o.jsx("button",{onClick:()=>u(W.id),className:`aspect-square rounded-md border-2 transition-transform hover:scale-105 overflow-hidden ${f===W.id?"border-pink-500 transform scale-105":"border-gray-200"}`,style:{backgroundImage:J(W.id),backgroundSize:"cover"},title:W.label,children:o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:f===W.id&&o.jsx("div",{className:"w-5 h-5 rounded-full bg-pink-500 text-white flex items-center justify-center",children:o.jsx("i",{className:"fas fa-check text-xs"})})})},W.id))}),d==="image"&&o.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center hover:border-pink-300 transition-colors",children:[o.jsx("i",{className:"fas fa-cloud-arrow-up text-2xl text-pink-400 mb-2"}),o.jsx("input",{type:"file",accept:"image/*",onChange:W=>v(W.target.files?.[0]||null),className:"w-full"}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"支持 JPG、PNG 格式"})]})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[o.jsxs("h3",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[o.jsx("i",{className:"fas fa-sliders text-purple-500 mr-2"}),"效果"]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:Yr.map(W=>o.jsxs("button",{onClick:()=>l(W.id),className:`px-3 py-1.5 rounded-full flex items-center gap-1.5 transition-colors ${g===W.id?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:border-pink-300 hover:text-pink-500"}`,children:[o.jsx("i",{className:`fas ${W.icon}`}),W.label]},W.id))}),g!=="none"&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("i",{className:`fas ${g==="blur"?"fa-droplet-slash":g==="brightness"?"fa-sun":g==="contrast"?"fa-circle-half-stroke":g==="filter"?"fa-photo-film":"fa-circle-half-stroke"} text-pink-500`}),o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"调整强度"})]}),o.jsx("input",{type:"range",min:"0",max:"100",value:z(),onChange:W=>ne(Number(W.target.value)),className:"w-full accent-pink-500"}),o.jsxs("div",{className:"flex justify-between text-sm text-gray-500",children:[o.jsx("span",{children:"0"}),o.jsx("span",{className:"px-2 py-0.5 bg-pink-100 text-pink-700 rounded-full text-xs",children:z()}),o.jsx("span",{children:"100"})]}),g==="filter"&&o.jsxs("div",{className:"mt-4",children:[o.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"选择滤镜"}),o.jsx("div",{className:"grid grid-cols-3 gap-2",children:Vr.map(W=>o.jsx("button",{onClick:()=>E(W.id),className:`px-3 py-2 rounded-md text-sm flex items-center justify-center gap-1 transition-colors ${N===W.id?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-sm":"bg-white border border-gray-200 text-gray-700 hover:border-pink-300 hover:text-pink-500"}`,children:W.label},W.id))})]})]})]})]}),o.jsxs("div",{className:`${g==="brush"?"col-span-2":"col-span-1"}`,children:[o.jsxs("h3",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[o.jsx("i",{className:"fas fa-eye text-purple-500 mr-2"}),"预览"]}),o.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden p-4",style:{background:'url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCI+CiAgPHJlY3Qgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBmaWxsPSIjZjNmNGY2Ii8+CiAgPHJlY3QgeD0iMTAiIHk9IjEwIiB3aWR0aD0iMTAiIGhlaWdodD0iMTAiIGZpbGw9IiNmM2Y0ZjYiLz4KICA8cmVjdCB4PSIxMCIgeT0iMCIgd2lkdGg9IjEwIiBoZWlnaHQ9IjEwIiBmaWxsPSIjZTVlN2ViIi8+CiAgPHJlY3QgeD0iMCIgeT0iMTAiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0iI2U1ZTdlYiIvPgo8L3N2Zz4=")'},children:g==="brush"?o.jsx("div",{className:"relative overflow-hidden",ref:r,style:{minHeight:"400px",maxHeight:"700px"},children:o.jsx("div",{ref:ae,style:{transform:`scale(${j})`,transformOrigin:"top left",height:"100%",width:"100%",overflow:"visible"},children:o.jsx("canvas",{ref:U,className:"object-contain rounded-md",onMouseDown:W=>{if(!(W.button===1||W.button===0&&W.altKey)&&U.current){const ee=U.current.getContext("2d");ee&&(ee.beginPath(),ee.moveTo(W.clientX,W.clientY))}},onMouseMove:W=>{if(U.current){const ee=U.current.getContext("2d");ee&&(ee.lineTo(W.clientX,W.clientY),ee.strokeStyle="rgba(255,255,255,0.9)",ee.lineWidth=5,ee.lineCap="round",ee.lineJoin="round",ee.stroke())}},onMouseUp:W=>{if(!(W.button===1||W.button===0&&W.altKey)&&U.current){const ee=U.current.getContext("2d");ee&&ee.closePath()}}})})}):o.jsx("img",{src:M||re,alt:"预览",className:"w-full object-contain rounded-md"})}),o.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-100",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("i",{className:"fas fa-lightbulb text-yellow-500 mt-0.5 mr-2"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-700 font-medium",children:"提示"}),o.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"您可以选择纯色、纹理或自定义图片作为背景，并应用各种效果来美化您的图片。 所有处理在本地完成，保障您的隐私安全。"})]})]})})]})]}),o.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-gray-100 pt-4",children:[o.jsxs("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-200 rounded-full hover:bg-gray-50 transition-colors flex items-center gap-1",children:[o.jsx("i",{className:"fas fa-times text-gray-400"}),"取消"]}),o.jsxs("button",{onClick:ue,className:"px-5 py-2 text-white bg-gradient-to-r from-pink-500 to-purple-600 rounded-full hover:opacity-90 transition-opacity shadow-md flex items-center gap-1",children:[o.jsx("i",{className:"fas fa-check"}),"保存更改"]})]})]})}):null}function Le(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Tt={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See http://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
http://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,b){(function(t){i.exports=t()})(function(){return function t(y,d,n){function s(u,w){if(!d[u]){if(!y[u]){var v=typeof Le=="function"&&Le;if(!w&&v)return v(u,!0);if(a)return a(u,!0);var g=new Error("Cannot find module '"+u+"'");throw g.code="MODULE_NOT_FOUND",g}var l=d[u]={exports:{}};y[u][0].call(l.exports,function(_){var c=y[u][1][_];return s(c||_)},l,l.exports,t,y,d,n)}return d[u].exports}for(var a=typeof Le=="function"&&Le,f=0;f<n.length;f++)s(n[f]);return s}({1:[function(t,y,d){var n=t("./utils"),s=t("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.encode=function(f){for(var u,w,v,g,l,_,c,m=[],h=0,k=f.length,A=k,N=n.getTypeOf(f)!=="string";h<f.length;)A=k-h,v=N?(u=f[h++],w=h<k?f[h++]:0,h<k?f[h++]:0):(u=f.charCodeAt(h++),w=h<k?f.charCodeAt(h++):0,h<k?f.charCodeAt(h++):0),g=u>>2,l=(3&u)<<4|w>>4,_=1<A?(15&w)<<2|v>>6:64,c=2<A?63&v:64,m.push(a.charAt(g)+a.charAt(l)+a.charAt(_)+a.charAt(c));return m.join("")},d.decode=function(f){var u,w,v,g,l,_,c=0,m=0,h="data:";if(f.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var k,A=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===a.charAt(64)&&A--,f.charAt(f.length-2)===a.charAt(64)&&A--,A%1!=0)throw new Error("Invalid base64 input, bad content length.");for(k=s.uint8array?new Uint8Array(0|A):new Array(0|A);c<f.length;)u=a.indexOf(f.charAt(c++))<<2|(g=a.indexOf(f.charAt(c++)))>>4,w=(15&g)<<4|(l=a.indexOf(f.charAt(c++)))>>2,v=(3&l)<<6|(_=a.indexOf(f.charAt(c++))),k[m++]=u,l!==64&&(k[m++]=w),_!==64&&(k[m++]=v);return k}},{"./support":30,"./utils":32}],2:[function(t,y,d){var n=t("./external"),s=t("./stream/DataWorker"),a=t("./stream/Crc32Probe"),f=t("./stream/DataLengthProbe");function u(w,v,g,l,_){this.compressedSize=w,this.uncompressedSize=v,this.crc32=g,this.compression=l,this.compressedContent=_}u.prototype={getContentWorker:function(){var w=new s(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),v=this;return w.on("end",function(){if(this.streamInfo.data_length!==v.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),w},getCompressedWorker:function(){return new s(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(w,v,g){return w.pipe(new a).pipe(new f("uncompressedSize")).pipe(v.compressWorker(g)).pipe(new f("compressedSize")).withStreamInfo("compression",v)},y.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,y,d){var n=t("./stream/GenericWorker");d.STORE={magic:"\0\0",compressWorker:function(){return new n("STORE compression")},uncompressWorker:function(){return new n("STORE decompression")}},d.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,y,d){var n=t("./utils"),s=function(){for(var a,f=[],u=0;u<256;u++){a=u;for(var w=0;w<8;w++)a=1&a?3988292384^a>>>1:a>>>1;f[u]=a}return f}();y.exports=function(a,f){return a!==void 0&&a.length?n.getTypeOf(a)!=="string"?function(u,w,v,g){var l=s,_=g+v;u^=-1;for(var c=g;c<_;c++)u=u>>>8^l[255&(u^w[c])];return-1^u}(0|f,a,a.length,0):function(u,w,v,g){var l=s,_=g+v;u^=-1;for(var c=g;c<_;c++)u=u>>>8^l[255&(u^w.charCodeAt(c))];return-1^u}(0|f,a,a.length,0):0}},{"./utils":32}],5:[function(t,y,d){d.base64=!1,d.binary=!1,d.dir=!1,d.createFolders=!0,d.date=null,d.compression=null,d.compressionOptions=null,d.comment=null,d.unixPermissions=null,d.dosPermissions=null},{}],6:[function(t,y,d){var n=null;n=typeof Promise<"u"?Promise:t("lie"),y.exports={Promise:n}},{lie:37}],7:[function(t,y,d){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=t("pako"),a=t("./utils"),f=t("./stream/GenericWorker"),u=n?"uint8array":"array";function w(v,g){f.call(this,"FlateWorker/"+v),this._pako=null,this._pakoAction=v,this._pakoOptions=g,this.meta={}}d.magic="\b\0",a.inherits(w,f),w.prototype.processChunk=function(v){this.meta=v.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(u,v.data),!1)},w.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},w.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},w.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var v=this;this._pako.onData=function(g){v.push({data:g,meta:v.meta})}},d.compressWorker=function(v){return new w("Deflate",v)},d.uncompressWorker=function(){return new w("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,y,d){function n(l,_){var c,m="";for(c=0;c<_;c++)m+=String.fromCharCode(255&l),l>>>=8;return m}function s(l,_,c,m,h,k){var A,N,E=l.file,M=l.compression,P=k!==u.utf8encode,H=a.transformTo("string",k(E.name)),O=a.transformTo("string",u.utf8encode(E.name)),U=E.comment,q=a.transformTo("string",k(U)),j=a.transformTo("string",u.utf8encode(U)),T=O.length!==E.name.length,r=j.length!==U.length,B="",ae="",K="",se=E.dir,G=E.date,re={crc32:0,compressedSize:0,uncompressedSize:0};_&&!c||(re.crc32=l.crc32,re.compressedSize=l.compressedSize,re.uncompressedSize=l.uncompressedSize);var D=0;_&&(D|=8),P||!T&&!r||(D|=2048);var z=0,ne=0;se&&(z|=16),h==="UNIX"?(ne=798,z|=function(V,ue){var W=V;return V||(W=ue?16893:33204),(65535&W)<<16}(E.unixPermissions,se)):(ne=20,z|=function(V){return 63&(V||0)}(E.dosPermissions)),A=G.getUTCHours(),A<<=6,A|=G.getUTCMinutes(),A<<=5,A|=G.getUTCSeconds()/2,N=G.getUTCFullYear()-1980,N<<=4,N|=G.getUTCMonth()+1,N<<=5,N|=G.getUTCDate(),T&&(ae=n(1,1)+n(w(H),4)+O,B+="up"+n(ae.length,2)+ae),r&&(K=n(1,1)+n(w(q),4)+j,B+="uc"+n(K.length,2)+K);var J="";return J+=`
\0`,J+=n(D,2),J+=M.magic,J+=n(A,2),J+=n(N,2),J+=n(re.crc32,4),J+=n(re.compressedSize,4),J+=n(re.uncompressedSize,4),J+=n(H.length,2),J+=n(B.length,2),{fileRecord:v.LOCAL_FILE_HEADER+J+H+B,dirRecord:v.CENTRAL_FILE_HEADER+n(ne,2)+J+n(q.length,2)+"\0\0\0\0"+n(z,4)+n(m,4)+H+B+q}}var a=t("../utils"),f=t("../stream/GenericWorker"),u=t("../utf8"),w=t("../crc32"),v=t("../signature");function g(l,_,c,m){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=_,this.zipPlatform=c,this.encodeFileName=m,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(g,f),g.prototype.push=function(l){var _=l.meta.percent||0,c=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,f.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:c?(_+100*(c-m-1))/c:100}}))},g.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var _=this.streamFiles&&!l.file.dir;if(_){var c=s(l,_,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(l){this.accumulate=!1;var _=this.streamFiles&&!l.file.dir,c=s(l,_,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),_)this.push({data:function(m){return v.DATA_DESCRIPTOR+n(m.crc32,4)+n(m.compressedSize,4)+n(m.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var l=this.bytesWritten,_=0;_<this.dirRecords.length;_++)this.push({data:this.dirRecords[_],meta:{percent:100}});var c=this.bytesWritten-l,m=function(h,k,A,N,E){var M=a.transformTo("string",E(N));return v.CENTRAL_DIRECTORY_END+"\0\0\0\0"+n(h,2)+n(h,2)+n(k,4)+n(A,4)+n(M.length,2)+M}(this.dirRecords.length,c,l,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(l){this._sources.push(l);var _=this;return l.on("data",function(c){_.processChunk(c)}),l.on("end",function(){_.closedSource(_.previous.streamInfo),_._sources.length?_.prepareNextSource():_.end()}),l.on("error",function(c){_.error(c)}),this},g.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(l){var _=this._sources;if(!f.prototype.error.call(this,l))return!1;for(var c=0;c<_.length;c++)try{_[c].error(l)}catch{}return!0},g.prototype.lock=function(){f.prototype.lock.call(this);for(var l=this._sources,_=0;_<l.length;_++)l[_].lock()},y.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,y,d){var n=t("../compressions"),s=t("./ZipFileWorker");d.generateWorker=function(a,f,u){var w=new s(f.streamFiles,u,f.platform,f.encodeFileName),v=0;try{a.forEach(function(g,l){v++;var _=function(k,A){var N=k||A,E=n[N];if(!E)throw new Error(N+" is not a valid compression method !");return E}(l.options.compression,f.compression),c=l.options.compressionOptions||f.compressionOptions||{},m=l.dir,h=l.date;l._compressWorker(_,c).withStreamInfo("file",{name:g,dir:m,date:h,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(w)}),w.entriesCount=v}catch(g){w.error(g)}return w}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,y,d){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new n;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(n.prototype=t("./object")).loadAsync=t("./load"),n.support=t("./support"),n.defaults=t("./defaults"),n.version="3.10.1",n.loadAsync=function(s,a){return new n().loadAsync(s,a)},n.external=t("./external"),y.exports=n},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,y,d){var n=t("./utils"),s=t("./external"),a=t("./utf8"),f=t("./zipEntries"),u=t("./stream/Crc32Probe"),w=t("./nodejsUtils");function v(g){return new s.Promise(function(l,_){var c=g.decompressed.getContentWorker().pipe(new u);c.on("error",function(m){_(m)}).on("end",function(){c.streamInfo.crc32!==g.decompressed.crc32?_(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}y.exports=function(g,l){var _=this;return l=n.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),w.isNode&&w.isStream(g)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",g,!0,l.optimizedBinaryString,l.base64).then(function(c){var m=new f(l);return m.load(c),m}).then(function(c){var m=[s.Promise.resolve(c)],h=c.files;if(l.checkCRC32)for(var k=0;k<h.length;k++)m.push(v(h[k]));return s.Promise.all(m)}).then(function(c){for(var m=c.shift(),h=m.files,k=0;k<h.length;k++){var A=h[k],N=A.fileNameStr,E=n.resolve(A.fileNameStr);_.file(E,A.decompressed,{binary:!0,optimizedBinaryString:!0,date:A.date,dir:A.dir,comment:A.fileCommentStr.length?A.fileCommentStr:null,unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions,createFolders:l.createFolders}),A.dir||(_.file(E).unsafeOriginalName=N)}return m.zipComment.length&&(_.comment=m.zipComment),_})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,y,d){var n=t("../utils"),s=t("../stream/GenericWorker");function a(f,u){s.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(u)}n.inherits(a,s),a.prototype._bindStream=function(f){var u=this;(this._stream=f).pause(),f.on("data",function(w){u.push({data:w,meta:{percent:0}})}).on("error",function(w){u.isPaused?this.generatedError=w:u.error(w)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},y.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,y,d){var n=t("readable-stream").Readable;function s(a,f,u){n.call(this,f),this._helper=a;var w=this;a.on("data",function(v,g){w.push(v)||w._helper.pause(),u&&u(g)}).on("error",function(v){w.emit("error",v)}).on("end",function(){w.push(null)})}t("../utils").inherits(s,n),s.prototype._read=function(){this._helper.resume()},y.exports=s},{"../utils":32,"readable-stream":16}],14:[function(t,y,d){y.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,s);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,s)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var s=new Buffer(n);return s.fill(0),s},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}},{}],15:[function(t,y,d){function n(E,M,P){var H,O=a.getTypeOf(M),U=a.extend(P||{},w);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(E=h(E)),U.createFolders&&(H=m(E))&&k.call(this,H,!0);var q=O==="string"&&U.binary===!1&&U.base64===!1;P&&P.binary!==void 0||(U.binary=!q),(M instanceof v&&M.uncompressedSize===0||U.dir||!M||M.length===0)&&(U.base64=!1,U.binary=!0,M="",U.compression="STORE",O="string");var j=null;j=M instanceof v||M instanceof f?M:_.isNode&&_.isStream(M)?new c(E,M):a.prepareContent(E,M,U.binary,U.optimizedBinaryString,U.base64);var T=new g(E,j,U);this.files[E]=T}var s=t("./utf8"),a=t("./utils"),f=t("./stream/GenericWorker"),u=t("./stream/StreamHelper"),w=t("./defaults"),v=t("./compressedObject"),g=t("./zipObject"),l=t("./generate"),_=t("./nodejsUtils"),c=t("./nodejs/NodejsStreamInputAdapter"),m=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var M=E.lastIndexOf("/");return 0<M?E.substring(0,M):""},h=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},k=function(E,M){return M=M!==void 0?M:w.createFolders,E=h(E),this.files[E]||n.call(this,E,null,{dir:!0,createFolders:M}),this.files[E]};function A(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var N={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var M,P,H;for(M in this.files)H=this.files[M],(P=M.slice(this.root.length,M.length))&&M.slice(0,this.root.length)===this.root&&E(P,H)},filter:function(E){var M=[];return this.forEach(function(P,H){E(P,H)&&M.push(H)}),M},file:function(E,M,P){if(arguments.length!==1)return E=this.root+E,n.call(this,E,M,P),this;if(A(E)){var H=E;return this.filter(function(U,q){return!q.dir&&H.test(U)})}var O=this.files[this.root+E];return O&&!O.dir?O:null},folder:function(E){if(!E)return this;if(A(E))return this.filter(function(O,U){return U.dir&&E.test(O)});var M=this.root+E,P=k.call(this,M),H=this.clone();return H.root=P.name,H},remove:function(E){E=this.root+E;var M=this.files[E];if(M||(E.slice(-1)!=="/"&&(E+="/"),M=this.files[E]),M&&!M.dir)delete this.files[E];else for(var P=this.filter(function(O,U){return U.name.slice(0,E.length)===E}),H=0;H<P.length;H++)delete this.files[P[H].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var M,P={};try{if((P=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=P.type.toLowerCase(),P.compression=P.compression.toUpperCase(),P.type==="binarystring"&&(P.type="string"),!P.type)throw new Error("No output type specified.");a.checkSupport(P.type),P.platform!=="darwin"&&P.platform!=="freebsd"&&P.platform!=="linux"&&P.platform!=="sunos"||(P.platform="UNIX"),P.platform==="win32"&&(P.platform="DOS");var H=P.comment||this.comment||"";M=l.generateWorker(this,P,H)}catch(O){(M=new f("error")).error(O)}return new u(M,P.type||"string",P.mimeType)},generateAsync:function(E,M){return this.generateInternalStream(E).accumulate(M)},generateNodeStream:function(E,M){return(E=E||{}).type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(M)}};y.exports=N},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,y,d){y.exports=t("stream")},{stream:void 0}],17:[function(t,y,d){var n=t("./DataReader");function s(a){n.call(this,a);for(var f=0;f<this.data.length;f++)a[f]=255&a[f]}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var f=a.charCodeAt(0),u=a.charCodeAt(1),w=a.charCodeAt(2),v=a.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===f&&this.data[g+1]===u&&this.data[g+2]===w&&this.data[g+3]===v)return g-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var f=a.charCodeAt(0),u=a.charCodeAt(1),w=a.charCodeAt(2),v=a.charCodeAt(3),g=this.readData(4);return f===g[0]&&u===g[1]&&w===g[2]&&v===g[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,f},y.exports=s},{"../utils":32,"./DataReader":18}],18:[function(t,y,d){var n=t("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var f,u=0;for(this.checkOffset(a),f=this.index+a-1;f>=this.index;f--)u=(u<<8)+this.byteAt(f);return this.index+=a,u},readString:function(a){return n.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},y.exports=s},{"../utils":32}],19:[function(t,y,d){var n=t("./Uint8ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){this.checkOffset(a);var f=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,f},y.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,y,d){var n=t("./DataReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var f=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,f},y.exports=s},{"../utils":32,"./DataReader":18}],21:[function(t,y,d){var n=t("./ArrayReader");function s(a){n.call(this,a)}t("../utils").inherits(s,n),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,f},y.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(t,y,d){var n=t("../utils"),s=t("../support"),a=t("./ArrayReader"),f=t("./StringReader"),u=t("./NodeBufferReader"),w=t("./Uint8ArrayReader");y.exports=function(v){var g=n.getTypeOf(v);return n.checkSupport(g),g!=="string"||s.uint8array?g==="nodebuffer"?new u(v):s.uint8array?new w(n.transformTo("uint8array",v)):new a(n.transformTo("array",v)):new f(v)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,y,d){d.LOCAL_FILE_HEADER="PK",d.CENTRAL_FILE_HEADER="PK",d.CENTRAL_DIRECTORY_END="PK",d.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",d.ZIP64_CENTRAL_DIRECTORY_END="PK",d.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,y,d){var n=t("./GenericWorker"),s=t("../utils");function a(f){n.call(this,"ConvertWorker to "+f),this.destType=f}s.inherits(a,n),a.prototype.processChunk=function(f){this.push({data:s.transformTo(this.destType,f.data),meta:f.meta})},y.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(t,y,d){var n=t("./GenericWorker"),s=t("../crc32");function a(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(a,n),a.prototype.processChunk=function(f){this.streamInfo.crc32=s(f.data,this.streamInfo.crc32||0),this.push(f)},y.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,y,d){var n=t("../utils"),s=t("./GenericWorker");function a(f){s.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}n.inherits(a,s),a.prototype.processChunk=function(f){if(f){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+f.data.length}s.prototype.processChunk.call(this,f)},y.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(t,y,d){var n=t("../utils"),s=t("./GenericWorker");function a(f){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(w){u.dataIsReady=!0,u.data=w,u.max=w&&w.length||0,u.type=n.getTypeOf(w),u.isPaused||u._tickAndRepeat()},function(w){u.error(w)})}n.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,u);break;case"uint8array":f=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":f=this.data.slice(this.index,u)}return this.index=u,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},y.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(t,y,d){function n(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var f=0;f<this._listeners[s].length;f++)this._listeners[s][f].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(f){a.processChunk(f)}),s.on("end",function(){a.end()}),s.on("error",function(f){a.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},y.exports=n},{}],29:[function(t,y,d){var n=t("../utils"),s=t("./ConvertWorker"),a=t("./GenericWorker"),f=t("../base64"),u=t("../support"),w=t("../external"),v=null;if(u.nodestream)try{v=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(_,c){return new w.Promise(function(m,h){var k=[],A=_._internalType,N=_._outputType,E=_._mimeType;_.on("data",function(M,P){k.push(M),c&&c(P)}).on("error",function(M){k=[],h(M)}).on("end",function(){try{var M=function(P,H,O){switch(P){case"blob":return n.newBlob(n.transformTo("arraybuffer",H),O);case"base64":return f.encode(H);default:return n.transformTo(P,H)}}(N,function(P,H){var O,U=0,q=null,j=0;for(O=0;O<H.length;O++)j+=H[O].length;switch(P){case"string":return H.join("");case"array":return Array.prototype.concat.apply([],H);case"uint8array":for(q=new Uint8Array(j),O=0;O<H.length;O++)q.set(H[O],U),U+=H[O].length;return q;case"nodebuffer":return Buffer.concat(H);default:throw new Error("concat : unsupported type '"+P+"'")}}(A,k),E);m(M)}catch(P){h(P)}k=[]}).resume()})}function l(_,c,m){var h=c;switch(c){case"blob":case"arraybuffer":h="uint8array";break;case"base64":h="string"}try{this._internalType=h,this._outputType=c,this._mimeType=m,n.checkSupport(h),this._worker=_.pipe(new s(h)),_.lock()}catch(k){this._worker=new a("error"),this._worker.error(k)}}l.prototype={accumulate:function(_){return g(this,_)},on:function(_,c){var m=this;return _==="data"?this._worker.on(_,function(h){c.call(m,h.data,h.meta)}):this._worker.on(_,function(){n.delay(c,arguments,m)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(_){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new v(this,{objectMode:this._outputType!=="nodebuffer"},_)}},y.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,y,d){if(d.base64=!0,d.array=!0,d.string=!0,d.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",d.nodebuffer=typeof Buffer<"u",d.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")d.blob=!1;else{var n=new ArrayBuffer(0);try{d.blob=new Blob([n],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(n),d.blob=s.getBlob("application/zip").size===0}catch{d.blob=!1}}}try{d.nodestream=!!t("readable-stream").Readable}catch{d.nodestream=!1}},{"readable-stream":16}],31:[function(t,y,d){for(var n=t("./utils"),s=t("./support"),a=t("./nodejsUtils"),f=t("./stream/GenericWorker"),u=new Array(256),w=0;w<256;w++)u[w]=252<=w?6:248<=w?5:240<=w?4:224<=w?3:192<=w?2:1;u[254]=u[254]=1;function v(){f.call(this,"utf-8 decode"),this.leftOver=null}function g(){f.call(this,"utf-8 encode")}d.utf8encode=function(l){return s.nodebuffer?a.newBufferFrom(l,"utf-8"):function(_){var c,m,h,k,A,N=_.length,E=0;for(k=0;k<N;k++)(64512&(m=_.charCodeAt(k)))==55296&&k+1<N&&(64512&(h=_.charCodeAt(k+1)))==56320&&(m=65536+(m-55296<<10)+(h-56320),k++),E+=m<128?1:m<2048?2:m<65536?3:4;for(c=s.uint8array?new Uint8Array(E):new Array(E),k=A=0;A<E;k++)(64512&(m=_.charCodeAt(k)))==55296&&k+1<N&&(64512&(h=_.charCodeAt(k+1)))==56320&&(m=65536+(m-55296<<10)+(h-56320),k++),m<128?c[A++]=m:(m<2048?c[A++]=192|m>>>6:(m<65536?c[A++]=224|m>>>12:(c[A++]=240|m>>>18,c[A++]=128|m>>>12&63),c[A++]=128|m>>>6&63),c[A++]=128|63&m);return c}(l)},d.utf8decode=function(l){return s.nodebuffer?n.transformTo("nodebuffer",l).toString("utf-8"):function(_){var c,m,h,k,A=_.length,N=new Array(2*A);for(c=m=0;c<A;)if((h=_[c++])<128)N[m++]=h;else if(4<(k=u[h]))N[m++]=65533,c+=k-1;else{for(h&=k===2?31:k===3?15:7;1<k&&c<A;)h=h<<6|63&_[c++],k--;1<k?N[m++]=65533:h<65536?N[m++]=h:(h-=65536,N[m++]=55296|h>>10&1023,N[m++]=56320|1023&h)}return N.length!==m&&(N.subarray?N=N.subarray(0,m):N.length=m),n.applyFromCharCode(N)}(l=n.transformTo(s.uint8array?"uint8array":"array",l))},n.inherits(v,f),v.prototype.processChunk=function(l){var _=n.transformTo(s.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var c=_;(_=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),_.set(c,this.leftOver.length)}else _=this.leftOver.concat(_);this.leftOver=null}var m=function(k,A){var N;for((A=A||k.length)>k.length&&(A=k.length),N=A-1;0<=N&&(192&k[N])==128;)N--;return N<0||N===0?A:N+u[k[N]]>A?N:A}(_),h=_;m!==_.length&&(s.uint8array?(h=_.subarray(0,m),this.leftOver=_.subarray(m,_.length)):(h=_.slice(0,m),this.leftOver=_.slice(m,_.length))),this.push({data:d.utf8decode(h),meta:l.meta})},v.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:d.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},d.Utf8DecodeWorker=v,n.inherits(g,f),g.prototype.processChunk=function(l){this.push({data:d.utf8encode(l.data),meta:l.meta})},d.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,y,d){var n=t("./support"),s=t("./base64"),a=t("./nodejsUtils"),f=t("./external");function u(c){return c}function w(c,m){for(var h=0;h<c.length;++h)m[h]=255&c.charCodeAt(h);return m}t("setimmediate"),d.newBlob=function(c,m){d.checkSupport("blob");try{return new Blob([c],{type:m})}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return h.append(c),h.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var v={stringifyByChunk:function(c,m,h){var k=[],A=0,N=c.length;if(N<=h)return String.fromCharCode.apply(null,c);for(;A<N;)m==="array"||m==="nodebuffer"?k.push(String.fromCharCode.apply(null,c.slice(A,Math.min(A+h,N)))):k.push(String.fromCharCode.apply(null,c.subarray(A,Math.min(A+h,N)))),A+=h;return k.join("")},stringifyByChar:function(c){for(var m="",h=0;h<c.length;h++)m+=String.fromCharCode(c[h]);return m},applyCanBeUsed:{uint8array:function(){try{return n.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return n.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function g(c){var m=65536,h=d.getTypeOf(c),k=!0;if(h==="uint8array"?k=v.applyCanBeUsed.uint8array:h==="nodebuffer"&&(k=v.applyCanBeUsed.nodebuffer),k)for(;1<m;)try{return v.stringifyByChunk(c,h,m)}catch{m=Math.floor(m/2)}return v.stringifyByChar(c)}function l(c,m){for(var h=0;h<c.length;h++)m[h]=c[h];return m}d.applyFromCharCode=g;var _={};_.string={string:u,array:function(c){return w(c,new Array(c.length))},arraybuffer:function(c){return _.string.uint8array(c).buffer},uint8array:function(c){return w(c,new Uint8Array(c.length))},nodebuffer:function(c){return w(c,a.allocBuffer(c.length))}},_.array={string:g,array:u,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(c)}},_.arraybuffer={string:function(c){return g(new Uint8Array(c))},array:function(c){return l(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:u,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(new Uint8Array(c))}},_.uint8array={string:g,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:u,nodebuffer:function(c){return a.newBufferFrom(c)}},_.nodebuffer={string:g,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return _.nodebuffer.uint8array(c).buffer},uint8array:function(c){return l(c,new Uint8Array(c.length))},nodebuffer:u},d.transformTo=function(c,m){if(m=m||"",!c)return m;d.checkSupport(c);var h=d.getTypeOf(m);return _[h][c](m)},d.resolve=function(c){for(var m=c.split("/"),h=[],k=0;k<m.length;k++){var A=m[k];A==="."||A===""&&k!==0&&k!==m.length-1||(A===".."?h.pop():h.push(A))}return h.join("/")},d.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":n.nodebuffer&&a.isBuffer(c)?"nodebuffer":n.uint8array&&c instanceof Uint8Array?"uint8array":n.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},d.checkSupport=function(c){if(!n[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},d.MAX_VALUE_16BITS=65535,d.MAX_VALUE_32BITS=-1,d.pretty=function(c){var m,h,k="";for(h=0;h<(c||"").length;h++)k+="\\x"+((m=c.charCodeAt(h))<16?"0":"")+m.toString(16).toUpperCase();return k},d.delay=function(c,m,h){setImmediate(function(){c.apply(h||null,m||[])})},d.inherits=function(c,m){function h(){}h.prototype=m.prototype,c.prototype=new h},d.extend=function(){var c,m,h={};for(c=0;c<arguments.length;c++)for(m in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],m)&&h[m]===void 0&&(h[m]=arguments[c][m]);return h},d.prepareContent=function(c,m,h,k,A){return f.Promise.resolve(m).then(function(N){return n.blob&&(N instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(N))!==-1)&&typeof FileReader<"u"?new f.Promise(function(E,M){var P=new FileReader;P.onload=function(H){E(H.target.result)},P.onerror=function(H){M(H.target.error)},P.readAsArrayBuffer(N)}):N}).then(function(N){var E=d.getTypeOf(N);return E?(E==="arraybuffer"?N=d.transformTo("uint8array",N):E==="string"&&(A?N=s.decode(N):h&&k!==!0&&(N=function(M){return w(M,n.uint8array?new Uint8Array(M.length):new Array(M.length))}(N))),N):f.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,y,d){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./signature"),f=t("./zipEntry"),u=t("./support");function w(v){this.files=[],this.loadOptions=v}w.prototype={checkSignature:function(v){if(!this.reader.readAndCheckSignature(v)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(g)+", expected "+s.pretty(v)+")")}},isSignature:function(v,g){var l=this.reader.index;this.reader.setIndex(v);var _=this.reader.readString(4)===g;return this.reader.setIndex(l),_},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var v=this.reader.readData(this.zipCommentLength),g=u.uint8array?"uint8array":"array",l=s.transformTo(g,v);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var v,g,l,_=this.zip64EndOfCentralSize-44;0<_;)v=this.reader.readInt(2),g=this.reader.readInt(4),l=this.reader.readData(g),this.zip64ExtensibleData[v]={id:v,length:g,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var v,g;for(v=0;v<this.files.length;v++)g=this.files[v],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var v;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(v=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(v);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var v=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(v<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(v);var g=v;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(v=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(v),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var _=g-l;if(0<_)this.isSignature(g,a.CENTRAL_FILE_HEADER)||(this.reader.zero=_);else if(_<0)throw new Error("Corrupted zip: missing "+Math.abs(_)+" bytes.")},prepareReader:function(v){this.reader=n(v)},load:function(v){this.prepareReader(v),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},y.exports=w},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,y,d){var n=t("./reader/readerFor"),s=t("./utils"),a=t("./compressedObject"),f=t("./crc32"),u=t("./utf8"),w=t("./compressions"),v=t("./support");function g(l,_){this.options=l,this.loadOptions=_}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var _,c;if(l.skip(22),this.fileNameLength=l.readInt(2),c=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((_=function(m){for(var h in w)if(Object.prototype.hasOwnProperty.call(w,h)&&w[h].magic===m)return w[h];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,_,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var _=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(_),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=n(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var _,c,m,h=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<h;)_=l.readInt(2),c=l.readInt(2),m=l.readData(c),this.extraFields[_]={id:_,length:c,value:m};l.setIndex(h)},handleUTF8:function(){var l=v.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var _=this.findExtraFieldUnicodePath();if(_!==null)this.fileNameStr=_;else{var c=s.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var h=s.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(h)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var _=n(l.value);return _.readInt(1)!==1||f(this.fileName)!==_.readInt(4)?null:u.utf8decode(_.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var _=n(l.value);return _.readInt(1)!==1||f(this.fileComment)!==_.readInt(4)?null:u.utf8decode(_.readData(l.length-5))}return null}},y.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,y,d){function n(_,c,m){this.name=_,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=c,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),f=t("./utf8"),u=t("./compressedObject"),w=t("./stream/GenericWorker");n.prototype={internalStream:function(_){var c=null,m="string";try{if(!_)throw new Error("No output type specified.");var h=(m=_.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),c=this._decompressWorker();var k=!this._dataBinary;k&&!h&&(c=c.pipe(new f.Utf8EncodeWorker)),!k&&h&&(c=c.pipe(new f.Utf8DecodeWorker))}catch(A){(c=new w("error")).error(A)}return new s(c,m,"")},async:function(_,c){return this.internalStream(_).accumulate(c)},nodeStream:function(_,c){return this.internalStream(_||"nodebuffer").toNodejsStream(c)},_compressWorker:function(_,c){if(this._data instanceof u&&this._data.compression.magic===_.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new f.Utf8EncodeWorker)),u.createWorkerFrom(m,_,c)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof w?this._data:new a(this._data)}};for(var v=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<v.length;l++)n.prototype[v[l]]=g;y.exports=n},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,y,d){(function(n){var s,a,f=n.MutationObserver||n.WebKitMutationObserver;if(f){var u=0,w=new f(_),v=n.document.createTextNode("");w.observe(v,{characterData:!0}),s=function(){v.data=u=++u%2}}else if(n.setImmediate||n.MessageChannel===void 0)s="document"in n&&"onreadystatechange"in n.document.createElement("script")?function(){var c=n.document.createElement("script");c.onreadystatechange=function(){_(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},n.document.documentElement.appendChild(c)}:function(){setTimeout(_,0)};else{var g=new n.MessageChannel;g.port1.onmessage=_,s=function(){g.port2.postMessage(0)}}var l=[];function _(){var c,m;a=!0;for(var h=l.length;h;){for(m=l,l=[],c=-1;++c<h;)m[c]();h=l.length}a=!1}y.exports=function(c){l.push(c)!==1||a||s()}}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,y,d){var n=t("immediate");function s(){}var a={},f=["REJECTED"],u=["FULFILLED"],w=["PENDING"];function v(h){if(typeof h!="function")throw new TypeError("resolver must be a function");this.state=w,this.queue=[],this.outcome=void 0,h!==s&&c(this,h)}function g(h,k,A){this.promise=h,typeof k=="function"&&(this.onFulfilled=k,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}function l(h,k,A){n(function(){var N;try{N=k(A)}catch(E){return a.reject(h,E)}N===h?a.reject(h,new TypeError("Cannot resolve promise with itself")):a.resolve(h,N)})}function _(h){var k=h&&h.then;if(h&&(typeof h=="object"||typeof h=="function")&&typeof k=="function")return function(){k.apply(h,arguments)}}function c(h,k){var A=!1;function N(P){A||(A=!0,a.reject(h,P))}function E(P){A||(A=!0,a.resolve(h,P))}var M=m(function(){k(E,N)});M.status==="error"&&N(M.value)}function m(h,k){var A={};try{A.value=h(k),A.status="success"}catch(N){A.status="error",A.value=N}return A}(y.exports=v).prototype.finally=function(h){if(typeof h!="function")return this;var k=this.constructor;return this.then(function(A){return k.resolve(h()).then(function(){return A})},function(A){return k.resolve(h()).then(function(){throw A})})},v.prototype.catch=function(h){return this.then(null,h)},v.prototype.then=function(h,k){if(typeof h!="function"&&this.state===u||typeof k!="function"&&this.state===f)return this;var A=new this.constructor(s);return this.state!==w?l(A,this.state===u?h:k,this.outcome):this.queue.push(new g(A,h,k)),A},g.prototype.callFulfilled=function(h){a.resolve(this.promise,h)},g.prototype.otherCallFulfilled=function(h){l(this.promise,this.onFulfilled,h)},g.prototype.callRejected=function(h){a.reject(this.promise,h)},g.prototype.otherCallRejected=function(h){l(this.promise,this.onRejected,h)},a.resolve=function(h,k){var A=m(_,k);if(A.status==="error")return a.reject(h,A.value);var N=A.value;if(N)c(h,N);else{h.state=u,h.outcome=k;for(var E=-1,M=h.queue.length;++E<M;)h.queue[E].callFulfilled(k)}return h},a.reject=function(h,k){h.state=f,h.outcome=k;for(var A=-1,N=h.queue.length;++A<N;)h.queue[A].callRejected(k);return h},v.resolve=function(h){return h instanceof this?h:a.resolve(new this(s),h)},v.reject=function(h){var k=new this(s);return a.reject(k,h)},v.all=function(h){var k=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=h.length,N=!1;if(!A)return this.resolve([]);for(var E=new Array(A),M=0,P=-1,H=new this(s);++P<A;)O(h[P],P);return H;function O(U,q){k.resolve(U).then(function(j){E[q]=j,++M!==A||N||(N=!0,a.resolve(H,E))},function(j){N||(N=!0,a.reject(H,j))})}},v.race=function(h){var k=this;if(Object.prototype.toString.call(h)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=h.length,N=!1;if(!A)return this.resolve([]);for(var E=-1,M=new this(s);++E<A;)P=h[E],k.resolve(P).then(function(H){N||(N=!0,a.resolve(M,H))},function(H){N||(N=!0,a.reject(M,H))});var P;return M}},{immediate:36}],38:[function(t,y,d){var n={};(0,t("./lib/utils/common").assign)(n,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),y.exports=n},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,y,d){var n=t("./zlib/deflate"),s=t("./utils/common"),a=t("./utils/strings"),f=t("./zlib/messages"),u=t("./zlib/zstream"),w=Object.prototype.toString,v=0,g=-1,l=0,_=8;function c(h){if(!(this instanceof c))return new c(h);this.options=s.assign({level:g,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},h||{});var k=this.options;k.raw&&0<k.windowBits?k.windowBits=-k.windowBits:k.gzip&&0<k.windowBits&&k.windowBits<16&&(k.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var A=n.deflateInit2(this.strm,k.level,k.method,k.windowBits,k.memLevel,k.strategy);if(A!==v)throw new Error(f[A]);if(k.header&&n.deflateSetHeader(this.strm,k.header),k.dictionary){var N;if(N=typeof k.dictionary=="string"?a.string2buf(k.dictionary):w.call(k.dictionary)==="[object ArrayBuffer]"?new Uint8Array(k.dictionary):k.dictionary,(A=n.deflateSetDictionary(this.strm,N))!==v)throw new Error(f[A]);this._dict_set=!0}}function m(h,k){var A=new c(k);if(A.push(h,!0),A.err)throw A.msg||f[A.err];return A.result}c.prototype.push=function(h,k){var A,N,E=this.strm,M=this.options.chunkSize;if(this.ended)return!1;N=k===~~k?k:k===!0?4:0,typeof h=="string"?E.input=a.string2buf(h):w.call(h)==="[object ArrayBuffer]"?E.input=new Uint8Array(h):E.input=h,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new s.Buf8(M),E.next_out=0,E.avail_out=M),(A=n.deflate(E,N))!==1&&A!==v)return this.onEnd(A),!(this.ended=!0);E.avail_out!==0&&(E.avail_in!==0||N!==4&&N!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(E.output,E.next_out))):this.onData(s.shrinkBuf(E.output,E.next_out)))}while((0<E.avail_in||E.avail_out===0)&&A!==1);return N===4?(A=n.deflateEnd(this.strm),this.onEnd(A),this.ended=!0,A===v):N!==2||(this.onEnd(v),!(E.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===v&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},d.Deflate=c,d.deflate=m,d.deflateRaw=function(h,k){return(k=k||{}).raw=!0,m(h,k)},d.gzip=function(h,k){return(k=k||{}).gzip=!0,m(h,k)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,y,d){var n=t("./zlib/inflate"),s=t("./utils/common"),a=t("./utils/strings"),f=t("./zlib/constants"),u=t("./zlib/messages"),w=t("./zlib/zstream"),v=t("./zlib/gzheader"),g=Object.prototype.toString;function l(c){if(!(this instanceof l))return new l(c);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},c||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||c&&c.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&!(15&m.windowBits)&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new w,this.strm.avail_out=0;var h=n.inflateInit2(this.strm,m.windowBits);if(h!==f.Z_OK)throw new Error(u[h]);this.header=new v,n.inflateGetHeader(this.strm,this.header)}function _(c,m){var h=new l(m);if(h.push(c,!0),h.err)throw h.msg||u[h.err];return h.result}l.prototype.push=function(c,m){var h,k,A,N,E,M,P=this.strm,H=this.options.chunkSize,O=this.options.dictionary,U=!1;if(this.ended)return!1;k=m===~~m?m:m===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof c=="string"?P.input=a.binstring2buf(c):g.call(c)==="[object ArrayBuffer]"?P.input=new Uint8Array(c):P.input=c,P.next_in=0,P.avail_in=P.input.length;do{if(P.avail_out===0&&(P.output=new s.Buf8(H),P.next_out=0,P.avail_out=H),(h=n.inflate(P,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&O&&(M=typeof O=="string"?a.string2buf(O):g.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,h=n.inflateSetDictionary(this.strm,M)),h===f.Z_BUF_ERROR&&U===!0&&(h=f.Z_OK,U=!1),h!==f.Z_STREAM_END&&h!==f.Z_OK)return this.onEnd(h),!(this.ended=!0);P.next_out&&(P.avail_out!==0&&h!==f.Z_STREAM_END&&(P.avail_in!==0||k!==f.Z_FINISH&&k!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(A=a.utf8border(P.output,P.next_out),N=P.next_out-A,E=a.buf2string(P.output,A),P.next_out=N,P.avail_out=H-N,N&&s.arraySet(P.output,P.output,A,N,0),this.onData(E)):this.onData(s.shrinkBuf(P.output,P.next_out)))),P.avail_in===0&&P.avail_out===0&&(U=!0)}while((0<P.avail_in||P.avail_out===0)&&h!==f.Z_STREAM_END);return h===f.Z_STREAM_END&&(k=f.Z_FINISH),k===f.Z_FINISH?(h=n.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,h===f.Z_OK):k!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(P.avail_out=0))},l.prototype.onData=function(c){this.chunks.push(c)},l.prototype.onEnd=function(c){c===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},d.Inflate=l,d.inflate=_,d.inflateRaw=function(c,m){return(m=m||{}).raw=!0,_(c,m)},d.ungzip=_},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,y,d){var n=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";d.assign=function(f){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var w=u.shift();if(w){if(typeof w!="object")throw new TypeError(w+"must be non-object");for(var v in w)w.hasOwnProperty(v)&&(f[v]=w[v])}}return f},d.shrinkBuf=function(f,u){return f.length===u?f:f.subarray?f.subarray(0,u):(f.length=u,f)};var s={arraySet:function(f,u,w,v,g){if(u.subarray&&f.subarray)f.set(u.subarray(w,w+v),g);else for(var l=0;l<v;l++)f[g+l]=u[w+l]},flattenChunks:function(f){var u,w,v,g,l,_;for(u=v=0,w=f.length;u<w;u++)v+=f[u].length;for(_=new Uint8Array(v),u=g=0,w=f.length;u<w;u++)l=f[u],_.set(l,g),g+=l.length;return _}},a={arraySet:function(f,u,w,v,g){for(var l=0;l<v;l++)f[g+l]=u[w+l]},flattenChunks:function(f){return[].concat.apply([],f)}};d.setTyped=function(f){f?(d.Buf8=Uint8Array,d.Buf16=Uint16Array,d.Buf32=Int32Array,d.assign(d,s)):(d.Buf8=Array,d.Buf16=Array,d.Buf32=Array,d.assign(d,a))},d.setTyped(n)},{}],42:[function(t,y,d){var n=t("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var f=new n.Buf8(256),u=0;u<256;u++)f[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function w(v,g){if(g<65537&&(v.subarray&&a||!v.subarray&&s))return String.fromCharCode.apply(null,n.shrinkBuf(v,g));for(var l="",_=0;_<g;_++)l+=String.fromCharCode(v[_]);return l}f[254]=f[254]=1,d.string2buf=function(v){var g,l,_,c,m,h=v.length,k=0;for(c=0;c<h;c++)(64512&(l=v.charCodeAt(c)))==55296&&c+1<h&&(64512&(_=v.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(_-56320),c++),k+=l<128?1:l<2048?2:l<65536?3:4;for(g=new n.Buf8(k),c=m=0;m<k;c++)(64512&(l=v.charCodeAt(c)))==55296&&c+1<h&&(64512&(_=v.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(_-56320),c++),l<128?g[m++]=l:(l<2048?g[m++]=192|l>>>6:(l<65536?g[m++]=224|l>>>12:(g[m++]=240|l>>>18,g[m++]=128|l>>>12&63),g[m++]=128|l>>>6&63),g[m++]=128|63&l);return g},d.buf2binstring=function(v){return w(v,v.length)},d.binstring2buf=function(v){for(var g=new n.Buf8(v.length),l=0,_=g.length;l<_;l++)g[l]=v.charCodeAt(l);return g},d.buf2string=function(v,g){var l,_,c,m,h=g||v.length,k=new Array(2*h);for(l=_=0;l<h;)if((c=v[l++])<128)k[_++]=c;else if(4<(m=f[c]))k[_++]=65533,l+=m-1;else{for(c&=m===2?31:m===3?15:7;1<m&&l<h;)c=c<<6|63&v[l++],m--;1<m?k[_++]=65533:c<65536?k[_++]=c:(c-=65536,k[_++]=55296|c>>10&1023,k[_++]=56320|1023&c)}return w(k,_)},d.utf8border=function(v,g){var l;for((g=g||v.length)>v.length&&(g=v.length),l=g-1;0<=l&&(192&v[l])==128;)l--;return l<0||l===0?g:l+f[v[l]]>g?l:g}},{"./common":41}],43:[function(t,y,d){y.exports=function(n,s,a,f){for(var u=65535&n|0,w=n>>>16&65535|0,v=0;a!==0;){for(a-=v=2e3<a?2e3:a;w=w+(u=u+s[f++]|0)|0,--v;);u%=65521,w%=65521}return u|w<<16|0}},{}],44:[function(t,y,d){y.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,y,d){var n=function(){for(var s,a=[],f=0;f<256;f++){s=f;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;a[f]=s}return a}();y.exports=function(s,a,f,u){var w=n,v=u+f;s^=-1;for(var g=u;g<v;g++)s=s>>>8^w[255&(s^a[g])];return-1^s}},{}],46:[function(t,y,d){var n,s=t("../utils/common"),a=t("./trees"),f=t("./adler32"),u=t("./crc32"),w=t("./messages"),v=0,g=4,l=0,_=-2,c=-1,m=4,h=2,k=8,A=9,N=286,E=30,M=19,P=2*N+1,H=15,O=3,U=258,q=U+O+1,j=42,T=113,r=1,B=2,ae=3,K=4;function se(e,L){return e.msg=w[L],L}function G(e){return(e<<1)-(4<e?9:0)}function re(e){for(var L=e.length;0<=--L;)e[L]=0}function D(e){var L=e.state,C=L.pending;C>e.avail_out&&(C=e.avail_out),C!==0&&(s.arraySet(e.output,L.pending_buf,L.pending_out,C,e.next_out),e.next_out+=C,L.pending_out+=C,e.total_out+=C,e.avail_out-=C,L.pending-=C,L.pending===0&&(L.pending_out=0))}function z(e,L){a._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,L),e.block_start=e.strstart,D(e.strm)}function ne(e,L){e.pending_buf[e.pending++]=L}function J(e,L){e.pending_buf[e.pending++]=L>>>8&255,e.pending_buf[e.pending++]=255&L}function V(e,L){var C,x,p=e.max_chain_length,S=e.strstart,Z=e.prev_length,$=e.nice_match,I=e.strstart>e.w_size-q?e.strstart-(e.w_size-q):0,Y=e.window,R=e.w_mask,F=e.prev,Q=e.strstart+U,le=Y[S+Z-1],ie=Y[S+Z];e.prev_length>=e.good_match&&(p>>=2),$>e.lookahead&&($=e.lookahead);do if(Y[(C=L)+Z]===ie&&Y[C+Z-1]===le&&Y[C]===Y[S]&&Y[++C]===Y[S+1]){S+=2,C++;do;while(Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&Y[++S]===Y[++C]&&S<Q);if(x=U-(Q-S),S=Q-U,Z<x){if(e.match_start=L,$<=(Z=x))break;le=Y[S+Z-1],ie=Y[S+Z]}}while((L=F[L&R])>I&&--p!=0);return Z<=e.lookahead?Z:e.lookahead}function ue(e){var L,C,x,p,S,Z,$,I,Y,R,F=e.w_size;do{if(p=e.window_size-e.lookahead-e.strstart,e.strstart>=F+(F-q)){for(s.arraySet(e.window,e.window,F,F,0),e.match_start-=F,e.strstart-=F,e.block_start-=F,L=C=e.hash_size;x=e.head[--L],e.head[L]=F<=x?x-F:0,--C;);for(L=C=F;x=e.prev[--L],e.prev[L]=F<=x?x-F:0,--C;);p+=F}if(e.strm.avail_in===0)break;if(Z=e.strm,$=e.window,I=e.strstart+e.lookahead,Y=p,R=void 0,R=Z.avail_in,Y<R&&(R=Y),C=R===0?0:(Z.avail_in-=R,s.arraySet($,Z.input,Z.next_in,R,I),Z.state.wrap===1?Z.adler=f(Z.adler,$,R,I):Z.state.wrap===2&&(Z.adler=u(Z.adler,$,R,I)),Z.next_in+=R,Z.total_in+=R,R),e.lookahead+=C,e.lookahead+e.insert>=O)for(S=e.strstart-e.insert,e.ins_h=e.window[S],e.ins_h=(e.ins_h<<e.hash_shift^e.window[S+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[S+O-1])&e.hash_mask,e.prev[S&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=S,S++,e.insert--,!(e.lookahead+e.insert<O)););}while(e.lookahead<q&&e.strm.avail_in!==0)}function W(e,L){for(var C,x;;){if(e.lookahead<q){if(ue(e),e.lookahead<q&&L===v)return r;if(e.lookahead===0)break}if(C=0,e.lookahead>=O&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,C=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),C!==0&&e.strstart-C<=e.w_size-q&&(e.match_length=V(e,C)),e.match_length>=O)if(x=a._tr_tally(e,e.strstart-e.match_start,e.match_length-O),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=O){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,C=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,--e.match_length!=0;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else x=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(x&&(z(e,!1),e.strm.avail_out===0))return r}return e.insert=e.strstart<O-1?e.strstart:O-1,L===g?(z(e,!0),e.strm.avail_out===0?ae:K):e.last_lit&&(z(e,!1),e.strm.avail_out===0)?r:B}function X(e,L){for(var C,x,p;;){if(e.lookahead<q){if(ue(e),e.lookahead<q&&L===v)return r;if(e.lookahead===0)break}if(C=0,e.lookahead>=O&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,C=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=O-1,C!==0&&e.prev_length<e.max_lazy_match&&e.strstart-C<=e.w_size-q&&(e.match_length=V(e,C),e.match_length<=5&&(e.strategy===1||e.match_length===O&&4096<e.strstart-e.match_start)&&(e.match_length=O-1)),e.prev_length>=O&&e.match_length<=e.prev_length){for(p=e.strstart+e.lookahead-O,x=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-O),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=p&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+O-1])&e.hash_mask,C=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),--e.prev_length!=0;);if(e.match_available=0,e.match_length=O-1,e.strstart++,x&&(z(e,!1),e.strm.avail_out===0))return r}else if(e.match_available){if((x=a._tr_tally(e,0,e.window[e.strstart-1]))&&z(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return r}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(x=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<O-1?e.strstart:O-1,L===g?(z(e,!0),e.strm.avail_out===0?ae:K):e.last_lit&&(z(e,!1),e.strm.avail_out===0)?r:B}function ee(e,L,C,x,p){this.good_length=e,this.max_lazy=L,this.nice_length=C,this.max_chain=x,this.func=p}function de(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*P),this.dyn_dtree=new s.Buf16(2*(2*E+1)),this.bl_tree=new s.Buf16(2*(2*M+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(H+1),this.heap=new s.Buf16(2*N+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*N+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function oe(e){var L;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=h,(L=e.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?j:T,e.adler=L.wrap===2?0:1,L.last_flush=v,a._tr_init(L),l):se(e,_)}function ce(e){var L=oe(e);return L===l&&function(C){C.window_size=2*C.w_size,re(C.head),C.max_lazy_match=n[C.level].max_lazy,C.good_match=n[C.level].good_length,C.nice_match=n[C.level].nice_length,C.max_chain_length=n[C.level].max_chain,C.strstart=0,C.block_start=0,C.lookahead=0,C.insert=0,C.match_length=C.prev_length=O-1,C.match_available=0,C.ins_h=0}(e.state),L}function pe(e,L,C,x,p,S){if(!e)return _;var Z=1;if(L===c&&(L=6),x<0?(Z=0,x=-x):15<x&&(Z=2,x-=16),p<1||A<p||C!==k||x<8||15<x||L<0||9<L||S<0||m<S)return se(e,_);x===8&&(x=9);var $=new de;return(e.state=$).strm=e,$.wrap=Z,$.gzhead=null,$.w_bits=x,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=p+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+O-1)/O),$.window=new s.Buf8(2*$.w_size),$.head=new s.Buf16($.hash_size),$.prev=new s.Buf16($.w_size),$.lit_bufsize=1<<p+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new s.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=L,$.strategy=S,$.method=C,ce(e)}n=[new ee(0,0,0,0,function(e,L){var C=65535;for(C>e.pending_buf_size-5&&(C=e.pending_buf_size-5);;){if(e.lookahead<=1){if(ue(e),e.lookahead===0&&L===v)return r;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var x=e.block_start+C;if((e.strstart===0||e.strstart>=x)&&(e.lookahead=e.strstart-x,e.strstart=x,z(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-q&&(z(e,!1),e.strm.avail_out===0))return r}return e.insert=0,L===g?(z(e,!0),e.strm.avail_out===0?ae:K):(e.strstart>e.block_start&&(z(e,!1),e.strm.avail_out),r)}),new ee(4,4,8,4,W),new ee(4,5,16,8,W),new ee(4,6,32,32,W),new ee(4,4,16,16,X),new ee(8,16,32,32,X),new ee(8,16,128,128,X),new ee(8,32,128,256,X),new ee(32,128,258,1024,X),new ee(32,258,258,4096,X)],d.deflateInit=function(e,L){return pe(e,L,k,15,8,0)},d.deflateInit2=pe,d.deflateReset=ce,d.deflateResetKeep=oe,d.deflateSetHeader=function(e,L){return e&&e.state?e.state.wrap!==2?_:(e.state.gzhead=L,l):_},d.deflate=function(e,L){var C,x,p,S;if(!e||!e.state||5<L||L<0)return e?se(e,_):_;if(x=e.state,!e.output||!e.input&&e.avail_in!==0||x.status===666&&L!==g)return se(e,e.avail_out===0?-5:_);if(x.strm=e,C=x.last_flush,x.last_flush=L,x.status===j)if(x.wrap===2)e.adler=0,ne(x,31),ne(x,139),ne(x,8),x.gzhead?(ne(x,(x.gzhead.text?1:0)+(x.gzhead.hcrc?2:0)+(x.gzhead.extra?4:0)+(x.gzhead.name?8:0)+(x.gzhead.comment?16:0)),ne(x,255&x.gzhead.time),ne(x,x.gzhead.time>>8&255),ne(x,x.gzhead.time>>16&255),ne(x,x.gzhead.time>>24&255),ne(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),ne(x,255&x.gzhead.os),x.gzhead.extra&&x.gzhead.extra.length&&(ne(x,255&x.gzhead.extra.length),ne(x,x.gzhead.extra.length>>8&255)),x.gzhead.hcrc&&(e.adler=u(e.adler,x.pending_buf,x.pending,0)),x.gzindex=0,x.status=69):(ne(x,0),ne(x,0),ne(x,0),ne(x,0),ne(x,0),ne(x,x.level===9?2:2<=x.strategy||x.level<2?4:0),ne(x,3),x.status=T);else{var Z=k+(x.w_bits-8<<4)<<8;Z|=(2<=x.strategy||x.level<2?0:x.level<6?1:x.level===6?2:3)<<6,x.strstart!==0&&(Z|=32),Z+=31-Z%31,x.status=T,J(x,Z),x.strstart!==0&&(J(x,e.adler>>>16),J(x,65535&e.adler)),e.adler=1}if(x.status===69)if(x.gzhead.extra){for(p=x.pending;x.gzindex<(65535&x.gzhead.extra.length)&&(x.pending!==x.pending_buf_size||(x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),D(e),p=x.pending,x.pending!==x.pending_buf_size));)ne(x,255&x.gzhead.extra[x.gzindex]),x.gzindex++;x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),x.gzindex===x.gzhead.extra.length&&(x.gzindex=0,x.status=73)}else x.status=73;if(x.status===73)if(x.gzhead.name){p=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),D(e),p=x.pending,x.pending===x.pending_buf_size)){S=1;break}S=x.gzindex<x.gzhead.name.length?255&x.gzhead.name.charCodeAt(x.gzindex++):0,ne(x,S)}while(S!==0);x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),S===0&&(x.gzindex=0,x.status=91)}else x.status=91;if(x.status===91)if(x.gzhead.comment){p=x.pending;do{if(x.pending===x.pending_buf_size&&(x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),D(e),p=x.pending,x.pending===x.pending_buf_size)){S=1;break}S=x.gzindex<x.gzhead.comment.length?255&x.gzhead.comment.charCodeAt(x.gzindex++):0,ne(x,S)}while(S!==0);x.gzhead.hcrc&&x.pending>p&&(e.adler=u(e.adler,x.pending_buf,x.pending-p,p)),S===0&&(x.status=103)}else x.status=103;if(x.status===103&&(x.gzhead.hcrc?(x.pending+2>x.pending_buf_size&&D(e),x.pending+2<=x.pending_buf_size&&(ne(x,255&e.adler),ne(x,e.adler>>8&255),e.adler=0,x.status=T)):x.status=T),x.pending!==0){if(D(e),e.avail_out===0)return x.last_flush=-1,l}else if(e.avail_in===0&&G(L)<=G(C)&&L!==g)return se(e,-5);if(x.status===666&&e.avail_in!==0)return se(e,-5);if(e.avail_in!==0||x.lookahead!==0||L!==v&&x.status!==666){var $=x.strategy===2?function(I,Y){for(var R;;){if(I.lookahead===0&&(ue(I),I.lookahead===0)){if(Y===v)return r;break}if(I.match_length=0,R=a._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++,R&&(z(I,!1),I.strm.avail_out===0))return r}return I.insert=0,Y===g?(z(I,!0),I.strm.avail_out===0?ae:K):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?r:B}(x,L):x.strategy===3?function(I,Y){for(var R,F,Q,le,ie=I.window;;){if(I.lookahead<=U){if(ue(I),I.lookahead<=U&&Y===v)return r;if(I.lookahead===0)break}if(I.match_length=0,I.lookahead>=O&&0<I.strstart&&(F=ie[Q=I.strstart-1])===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]){le=I.strstart+U;do;while(F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&F===ie[++Q]&&Q<le);I.match_length=U-(le-Q),I.match_length>I.lookahead&&(I.match_length=I.lookahead)}if(I.match_length>=O?(R=a._tr_tally(I,1,I.match_length-O),I.lookahead-=I.match_length,I.strstart+=I.match_length,I.match_length=0):(R=a._tr_tally(I,0,I.window[I.strstart]),I.lookahead--,I.strstart++),R&&(z(I,!1),I.strm.avail_out===0))return r}return I.insert=0,Y===g?(z(I,!0),I.strm.avail_out===0?ae:K):I.last_lit&&(z(I,!1),I.strm.avail_out===0)?r:B}(x,L):n[x.level].func(x,L);if($!==ae&&$!==K||(x.status=666),$===r||$===ae)return e.avail_out===0&&(x.last_flush=-1),l;if($===B&&(L===1?a._tr_align(x):L!==5&&(a._tr_stored_block(x,0,0,!1),L===3&&(re(x.head),x.lookahead===0&&(x.strstart=0,x.block_start=0,x.insert=0))),D(e),e.avail_out===0))return x.last_flush=-1,l}return L!==g?l:x.wrap<=0?1:(x.wrap===2?(ne(x,255&e.adler),ne(x,e.adler>>8&255),ne(x,e.adler>>16&255),ne(x,e.adler>>24&255),ne(x,255&e.total_in),ne(x,e.total_in>>8&255),ne(x,e.total_in>>16&255),ne(x,e.total_in>>24&255)):(J(x,e.adler>>>16),J(x,65535&e.adler)),D(e),0<x.wrap&&(x.wrap=-x.wrap),x.pending!==0?l:1)},d.deflateEnd=function(e){var L;return e&&e.state?(L=e.state.status)!==j&&L!==69&&L!==73&&L!==91&&L!==103&&L!==T&&L!==666?se(e,_):(e.state=null,L===T?se(e,-3):l):_},d.deflateSetDictionary=function(e,L){var C,x,p,S,Z,$,I,Y,R=L.length;if(!e||!e.state||(S=(C=e.state).wrap)===2||S===1&&C.status!==j||C.lookahead)return _;for(S===1&&(e.adler=f(e.adler,L,R,0)),C.wrap=0,R>=C.w_size&&(S===0&&(re(C.head),C.strstart=0,C.block_start=0,C.insert=0),Y=new s.Buf8(C.w_size),s.arraySet(Y,L,R-C.w_size,C.w_size,0),L=Y,R=C.w_size),Z=e.avail_in,$=e.next_in,I=e.input,e.avail_in=R,e.next_in=0,e.input=L,ue(C);C.lookahead>=O;){for(x=C.strstart,p=C.lookahead-(O-1);C.ins_h=(C.ins_h<<C.hash_shift^C.window[x+O-1])&C.hash_mask,C.prev[x&C.w_mask]=C.head[C.ins_h],C.head[C.ins_h]=x,x++,--p;);C.strstart=x,C.lookahead=O-1,ue(C)}return C.strstart+=C.lookahead,C.block_start=C.strstart,C.insert=C.lookahead,C.lookahead=0,C.match_length=C.prev_length=O-1,C.match_available=0,e.next_in=$,e.input=I,e.avail_in=Z,C.wrap=S,l},d.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,y,d){y.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,y,d){y.exports=function(n,s){var a,f,u,w,v,g,l,_,c,m,h,k,A,N,E,M,P,H,O,U,q,j,T,r,B;a=n.state,f=n.next_in,r=n.input,u=f+(n.avail_in-5),w=n.next_out,B=n.output,v=w-(s-n.avail_out),g=w+(n.avail_out-257),l=a.dmax,_=a.wsize,c=a.whave,m=a.wnext,h=a.window,k=a.hold,A=a.bits,N=a.lencode,E=a.distcode,M=(1<<a.lenbits)-1,P=(1<<a.distbits)-1;e:do{A<15&&(k+=r[f++]<<A,A+=8,k+=r[f++]<<A,A+=8),H=N[k&M];t:for(;;){if(k>>>=O=H>>>24,A-=O,(O=H>>>16&255)===0)B[w++]=65535&H;else{if(!(16&O)){if(!(64&O)){H=N[(65535&H)+(k&(1<<O)-1)];continue t}if(32&O){a.mode=12;break e}n.msg="invalid literal/length code",a.mode=30;break e}U=65535&H,(O&=15)&&(A<O&&(k+=r[f++]<<A,A+=8),U+=k&(1<<O)-1,k>>>=O,A-=O),A<15&&(k+=r[f++]<<A,A+=8,k+=r[f++]<<A,A+=8),H=E[k&P];r:for(;;){if(k>>>=O=H>>>24,A-=O,!(16&(O=H>>>16&255))){if(!(64&O)){H=E[(65535&H)+(k&(1<<O)-1)];continue r}n.msg="invalid distance code",a.mode=30;break e}if(q=65535&H,A<(O&=15)&&(k+=r[f++]<<A,(A+=8)<O&&(k+=r[f++]<<A,A+=8)),l<(q+=k&(1<<O)-1)){n.msg="invalid distance too far back",a.mode=30;break e}if(k>>>=O,A-=O,(O=w-v)<q){if(c<(O=q-O)&&a.sane){n.msg="invalid distance too far back",a.mode=30;break e}if(T=h,(j=0)===m){if(j+=_-O,O<U){for(U-=O;B[w++]=h[j++],--O;);j=w-q,T=B}}else if(m<O){if(j+=_+m-O,(O-=m)<U){for(U-=O;B[w++]=h[j++],--O;);if(j=0,m<U){for(U-=O=m;B[w++]=h[j++],--O;);j=w-q,T=B}}}else if(j+=m-O,O<U){for(U-=O;B[w++]=h[j++],--O;);j=w-q,T=B}for(;2<U;)B[w++]=T[j++],B[w++]=T[j++],B[w++]=T[j++],U-=3;U&&(B[w++]=T[j++],1<U&&(B[w++]=T[j++]))}else{for(j=w-q;B[w++]=B[j++],B[w++]=B[j++],B[w++]=B[j++],2<(U-=3););U&&(B[w++]=B[j++],1<U&&(B[w++]=B[j++]))}break}}break}}while(f<u&&w<g);f-=U=A>>3,k&=(1<<(A-=U<<3))-1,n.next_in=f,n.next_out=w,n.avail_in=f<u?u-f+5:5-(f-u),n.avail_out=w<g?g-w+257:257-(w-g),a.hold=k,a.bits=A}},{}],49:[function(t,y,d){var n=t("../utils/common"),s=t("./adler32"),a=t("./crc32"),f=t("./inffast"),u=t("./inftrees"),w=1,v=2,g=0,l=-2,_=1,c=852,m=592;function h(j){return(j>>>24&255)+(j>>>8&65280)+((65280&j)<<8)+((255&j)<<24)}function k(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(j){var T;return j&&j.state?(T=j.state,j.total_in=j.total_out=T.total=0,j.msg="",T.wrap&&(j.adler=1&T.wrap),T.mode=_,T.last=0,T.havedict=0,T.dmax=32768,T.head=null,T.hold=0,T.bits=0,T.lencode=T.lendyn=new n.Buf32(c),T.distcode=T.distdyn=new n.Buf32(m),T.sane=1,T.back=-1,g):l}function N(j){var T;return j&&j.state?((T=j.state).wsize=0,T.whave=0,T.wnext=0,A(j)):l}function E(j,T){var r,B;return j&&j.state?(B=j.state,T<0?(r=0,T=-T):(r=1+(T>>4),T<48&&(T&=15)),T&&(T<8||15<T)?l:(B.window!==null&&B.wbits!==T&&(B.window=null),B.wrap=r,B.wbits=T,N(j))):l}function M(j,T){var r,B;return j?(B=new k,(j.state=B).window=null,(r=E(j,T))!==g&&(j.state=null),r):l}var P,H,O=!0;function U(j){if(O){var T;for(P=new n.Buf32(512),H=new n.Buf32(32),T=0;T<144;)j.lens[T++]=8;for(;T<256;)j.lens[T++]=9;for(;T<280;)j.lens[T++]=7;for(;T<288;)j.lens[T++]=8;for(u(w,j.lens,0,288,P,0,j.work,{bits:9}),T=0;T<32;)j.lens[T++]=5;u(v,j.lens,0,32,H,0,j.work,{bits:5}),O=!1}j.lencode=P,j.lenbits=9,j.distcode=H,j.distbits=5}function q(j,T,r,B){var ae,K=j.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new n.Buf8(K.wsize)),B>=K.wsize?(n.arraySet(K.window,T,r-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(B<(ae=K.wsize-K.wnext)&&(ae=B),n.arraySet(K.window,T,r-B,ae,K.wnext),(B-=ae)?(n.arraySet(K.window,T,r-B,B,0),K.wnext=B,K.whave=K.wsize):(K.wnext+=ae,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=ae))),0}d.inflateReset=N,d.inflateReset2=E,d.inflateResetKeep=A,d.inflateInit=function(j){return M(j,15)},d.inflateInit2=M,d.inflate=function(j,T){var r,B,ae,K,se,G,re,D,z,ne,J,V,ue,W,X,ee,de,oe,ce,pe,e,L,C,x,p=0,S=new n.Buf8(4),Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!j||!j.state||!j.output||!j.input&&j.avail_in!==0)return l;(r=j.state).mode===12&&(r.mode=13),se=j.next_out,ae=j.output,re=j.avail_out,K=j.next_in,B=j.input,G=j.avail_in,D=r.hold,z=r.bits,ne=G,J=re,L=g;e:for(;;)switch(r.mode){case _:if(r.wrap===0){r.mode=13;break}for(;z<16;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(2&r.wrap&&D===35615){S[r.check=0]=255&D,S[1]=D>>>8&255,r.check=a(r.check,S,2,0),z=D=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&D)<<8)+(D>>8))%31){j.msg="incorrect header check",r.mode=30;break}if((15&D)!=8){j.msg="unknown compression method",r.mode=30;break}if(z-=4,e=8+(15&(D>>>=4)),r.wbits===0)r.wbits=e;else if(e>r.wbits){j.msg="invalid window size",r.mode=30;break}r.dmax=1<<e,j.adler=r.check=1,r.mode=512&D?10:12,z=D=0;break;case 2:for(;z<16;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(r.flags=D,(255&r.flags)!=8){j.msg="unknown compression method",r.mode=30;break}if(57344&r.flags){j.msg="unknown header flags set",r.mode=30;break}r.head&&(r.head.text=D>>8&1),512&r.flags&&(S[0]=255&D,S[1]=D>>>8&255,r.check=a(r.check,S,2,0)),z=D=0,r.mode=3;case 3:for(;z<32;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.head&&(r.head.time=D),512&r.flags&&(S[0]=255&D,S[1]=D>>>8&255,S[2]=D>>>16&255,S[3]=D>>>24&255,r.check=a(r.check,S,4,0)),z=D=0,r.mode=4;case 4:for(;z<16;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.head&&(r.head.xflags=255&D,r.head.os=D>>8),512&r.flags&&(S[0]=255&D,S[1]=D>>>8&255,r.check=a(r.check,S,2,0)),z=D=0,r.mode=5;case 5:if(1024&r.flags){for(;z<16;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.length=D,r.head&&(r.head.extra_len=D),512&r.flags&&(S[0]=255&D,S[1]=D>>>8&255,r.check=a(r.check,S,2,0)),z=D=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&(G<(V=r.length)&&(V=G),V&&(r.head&&(e=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),n.arraySet(r.head.extra,B,K,V,e)),512&r.flags&&(r.check=a(r.check,B,V,K)),G-=V,K+=V,r.length-=V),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(G===0)break e;for(V=0;e=B[K+V++],r.head&&e&&r.length<65536&&(r.head.name+=String.fromCharCode(e)),e&&V<G;);if(512&r.flags&&(r.check=a(r.check,B,V,K)),G-=V,K+=V,e)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(G===0)break e;for(V=0;e=B[K+V++],r.head&&e&&r.length<65536&&(r.head.comment+=String.fromCharCode(e)),e&&V<G;);if(512&r.flags&&(r.check=a(r.check,B,V,K)),G-=V,K+=V,e)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;z<16;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(D!==(65535&r.check)){j.msg="header crc mismatch",r.mode=30;break}z=D=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),j.adler=r.check=0,r.mode=12;break;case 10:for(;z<32;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}j.adler=r.check=h(D),z=D=0,r.mode=11;case 11:if(r.havedict===0)return j.next_out=se,j.avail_out=re,j.next_in=K,j.avail_in=G,r.hold=D,r.bits=z,2;j.adler=r.check=1,r.mode=12;case 12:if(T===5||T===6)break e;case 13:if(r.last){D>>>=7&z,z-=7&z,r.mode=27;break}for(;z<3;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}switch(r.last=1&D,z-=1,3&(D>>>=1)){case 0:r.mode=14;break;case 1:if(U(r),r.mode=20,T!==6)break;D>>>=2,z-=2;break e;case 2:r.mode=17;break;case 3:j.msg="invalid block type",r.mode=30}D>>>=2,z-=2;break;case 14:for(D>>>=7&z,z-=7&z;z<32;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if((65535&D)!=(D>>>16^65535)){j.msg="invalid stored block lengths",r.mode=30;break}if(r.length=65535&D,z=D=0,r.mode=15,T===6)break e;case 15:r.mode=16;case 16:if(V=r.length){if(G<V&&(V=G),re<V&&(V=re),V===0)break e;n.arraySet(ae,B,K,V,se),G-=V,K+=V,re-=V,se+=V,r.length-=V;break}r.mode=12;break;case 17:for(;z<14;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(r.nlen=257+(31&D),D>>>=5,z-=5,r.ndist=1+(31&D),D>>>=5,z-=5,r.ncode=4+(15&D),D>>>=4,z-=4,286<r.nlen||30<r.ndist){j.msg="too many length or distance symbols",r.mode=30;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;z<3;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.lens[Z[r.have++]]=7&D,D>>>=3,z-=3}for(;r.have<19;)r.lens[Z[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,C={bits:r.lenbits},L=u(0,r.lens,0,19,r.lencode,0,r.work,C),r.lenbits=C.bits,L){j.msg="invalid code lengths set",r.mode=30;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;ee=(p=r.lencode[D&(1<<r.lenbits)-1])>>>16&255,de=65535&p,!((X=p>>>24)<=z);){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(de<16)D>>>=X,z-=X,r.lens[r.have++]=de;else{if(de===16){for(x=X+2;z<x;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(D>>>=X,z-=X,r.have===0){j.msg="invalid bit length repeat",r.mode=30;break}e=r.lens[r.have-1],V=3+(3&D),D>>>=2,z-=2}else if(de===17){for(x=X+3;z<x;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}z-=X,e=0,V=3+(7&(D>>>=X)),D>>>=3,z-=3}else{for(x=X+7;z<x;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}z-=X,e=0,V=11+(127&(D>>>=X)),D>>>=7,z-=7}if(r.have+V>r.nlen+r.ndist){j.msg="invalid bit length repeat",r.mode=30;break}for(;V--;)r.lens[r.have++]=e}}if(r.mode===30)break;if(r.lens[256]===0){j.msg="invalid code -- missing end-of-block",r.mode=30;break}if(r.lenbits=9,C={bits:r.lenbits},L=u(w,r.lens,0,r.nlen,r.lencode,0,r.work,C),r.lenbits=C.bits,L){j.msg="invalid literal/lengths set",r.mode=30;break}if(r.distbits=6,r.distcode=r.distdyn,C={bits:r.distbits},L=u(v,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,C),r.distbits=C.bits,L){j.msg="invalid distances set",r.mode=30;break}if(r.mode=20,T===6)break e;case 20:r.mode=21;case 21:if(6<=G&&258<=re){j.next_out=se,j.avail_out=re,j.next_in=K,j.avail_in=G,r.hold=D,r.bits=z,f(j,J),se=j.next_out,ae=j.output,re=j.avail_out,K=j.next_in,B=j.input,G=j.avail_in,D=r.hold,z=r.bits,r.mode===12&&(r.back=-1);break}for(r.back=0;ee=(p=r.lencode[D&(1<<r.lenbits)-1])>>>16&255,de=65535&p,!((X=p>>>24)<=z);){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(ee&&!(240&ee)){for(oe=X,ce=ee,pe=de;ee=(p=r.lencode[pe+((D&(1<<oe+ce)-1)>>oe)])>>>16&255,de=65535&p,!(oe+(X=p>>>24)<=z);){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}D>>>=oe,z-=oe,r.back+=oe}if(D>>>=X,z-=X,r.back+=X,r.length=de,ee===0){r.mode=26;break}if(32&ee){r.back=-1,r.mode=12;break}if(64&ee){j.msg="invalid literal/length code",r.mode=30;break}r.extra=15&ee,r.mode=22;case 22:if(r.extra){for(x=r.extra;z<x;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.length+=D&(1<<r.extra)-1,D>>>=r.extra,z-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;ee=(p=r.distcode[D&(1<<r.distbits)-1])>>>16&255,de=65535&p,!((X=p>>>24)<=z);){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(!(240&ee)){for(oe=X,ce=ee,pe=de;ee=(p=r.distcode[pe+((D&(1<<oe+ce)-1)>>oe)])>>>16&255,de=65535&p,!(oe+(X=p>>>24)<=z);){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}D>>>=oe,z-=oe,r.back+=oe}if(D>>>=X,z-=X,r.back+=X,64&ee){j.msg="invalid distance code",r.mode=30;break}r.offset=de,r.extra=15&ee,r.mode=24;case 24:if(r.extra){for(x=r.extra;z<x;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}r.offset+=D&(1<<r.extra)-1,D>>>=r.extra,z-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){j.msg="invalid distance too far back",r.mode=30;break}r.mode=25;case 25:if(re===0)break e;if(V=J-re,r.offset>V){if((V=r.offset-V)>r.whave&&r.sane){j.msg="invalid distance too far back",r.mode=30;break}ue=V>r.wnext?(V-=r.wnext,r.wsize-V):r.wnext-V,V>r.length&&(V=r.length),W=r.window}else W=ae,ue=se-r.offset,V=r.length;for(re<V&&(V=re),re-=V,r.length-=V;ae[se++]=W[ue++],--V;);r.length===0&&(r.mode=21);break;case 26:if(re===0)break e;ae[se++]=r.length,re--,r.mode=21;break;case 27:if(r.wrap){for(;z<32;){if(G===0)break e;G--,D|=B[K++]<<z,z+=8}if(J-=re,j.total_out+=J,r.total+=J,J&&(j.adler=r.check=r.flags?a(r.check,ae,J,se-J):s(r.check,ae,J,se-J)),J=re,(r.flags?D:h(D))!==r.check){j.msg="incorrect data check",r.mode=30;break}z=D=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;z<32;){if(G===0)break e;G--,D+=B[K++]<<z,z+=8}if(D!==(4294967295&r.total)){j.msg="incorrect length check",r.mode=30;break}z=D=0}r.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;case 32:default:return l}return j.next_out=se,j.avail_out=re,j.next_in=K,j.avail_in=G,r.hold=D,r.bits=z,(r.wsize||J!==j.avail_out&&r.mode<30&&(r.mode<27||T!==4))&&q(j,j.output,j.next_out,J-j.avail_out)?(r.mode=31,-4):(ne-=j.avail_in,J-=j.avail_out,j.total_in+=ne,j.total_out+=J,r.total+=J,r.wrap&&J&&(j.adler=r.check=r.flags?a(r.check,ae,J,j.next_out-J):s(r.check,ae,J,j.next_out-J)),j.data_type=r.bits+(r.last?64:0)+(r.mode===12?128:0)+(r.mode===20||r.mode===15?256:0),(ne==0&&J===0||T===4)&&L===g&&(L=-5),L)},d.inflateEnd=function(j){if(!j||!j.state)return l;var T=j.state;return T.window&&(T.window=null),j.state=null,g},d.inflateGetHeader=function(j,T){var r;return j&&j.state&&2&(r=j.state).wrap?((r.head=T).done=!1,g):l},d.inflateSetDictionary=function(j,T){var r,B=T.length;return j&&j.state?(r=j.state).wrap!==0&&r.mode!==11?l:r.mode===11&&s(1,T,B,0)!==r.check?-3:q(j,T,B,B)?(r.mode=31,-4):(r.havedict=1,g):l},d.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,y,d){var n=t("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];y.exports=function(w,v,g,l,_,c,m,h){var k,A,N,E,M,P,H,O,U,q=h.bits,j=0,T=0,r=0,B=0,ae=0,K=0,se=0,G=0,re=0,D=0,z=null,ne=0,J=new n.Buf16(16),V=new n.Buf16(16),ue=null,W=0;for(j=0;j<=15;j++)J[j]=0;for(T=0;T<l;T++)J[v[g+T]]++;for(ae=q,B=15;1<=B&&J[B]===0;B--);if(B<ae&&(ae=B),B===0)return _[c++]=20971520,_[c++]=20971520,h.bits=1,0;for(r=1;r<B&&J[r]===0;r++);for(ae<r&&(ae=r),j=G=1;j<=15;j++)if(G<<=1,(G-=J[j])<0)return-1;if(0<G&&(w===0||B!==1))return-1;for(V[1]=0,j=1;j<15;j++)V[j+1]=V[j]+J[j];for(T=0;T<l;T++)v[g+T]!==0&&(m[V[v[g+T]]++]=T);if(P=w===0?(z=ue=m,19):w===1?(z=s,ne-=257,ue=a,W-=257,256):(z=f,ue=u,-1),j=r,M=c,se=T=D=0,N=-1,E=(re=1<<(K=ae))-1,w===1&&852<re||w===2&&592<re)return 1;for(;;){for(H=j-se,U=m[T]<P?(O=0,m[T]):m[T]>P?(O=ue[W+m[T]],z[ne+m[T]]):(O=96,0),k=1<<j-se,r=A=1<<K;_[M+(D>>se)+(A-=k)]=H<<24|O<<16|U|0,A!==0;);for(k=1<<j-1;D&k;)k>>=1;if(k!==0?(D&=k-1,D+=k):D=0,T++,--J[j]==0){if(j===B)break;j=v[g+m[T]]}if(ae<j&&(D&E)!==N){for(se===0&&(se=ae),M+=r,G=1<<(K=j-se);K+se<B&&!((G-=J[K+se])<=0);)K++,G<<=1;if(re+=1<<K,w===1&&852<re||w===2&&592<re)return 1;_[N=D&E]=ae<<24|K<<16|M-c|0}}return D!==0&&(_[M+D]=j-se<<24|64<<16|0),h.bits=ae,0}},{"../utils/common":41}],51:[function(t,y,d){y.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,y,d){var n=t("../utils/common"),s=0,a=1;function f(p){for(var S=p.length;0<=--S;)p[S]=0}var u=0,w=29,v=256,g=v+1+w,l=30,_=19,c=2*g+1,m=15,h=16,k=7,A=256,N=16,E=17,M=18,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(g+2));f(q);var j=new Array(2*l);f(j);var T=new Array(512);f(T);var r=new Array(256);f(r);var B=new Array(w);f(B);var ae,K,se,G=new Array(l);function re(p,S,Z,$,I){this.static_tree=p,this.extra_bits=S,this.extra_base=Z,this.elems=$,this.max_length=I,this.has_stree=p&&p.length}function D(p,S){this.dyn_tree=p,this.max_code=0,this.stat_desc=S}function z(p){return p<256?T[p]:T[256+(p>>>7)]}function ne(p,S){p.pending_buf[p.pending++]=255&S,p.pending_buf[p.pending++]=S>>>8&255}function J(p,S,Z){p.bi_valid>h-Z?(p.bi_buf|=S<<p.bi_valid&65535,ne(p,p.bi_buf),p.bi_buf=S>>h-p.bi_valid,p.bi_valid+=Z-h):(p.bi_buf|=S<<p.bi_valid&65535,p.bi_valid+=Z)}function V(p,S,Z){J(p,Z[2*S],Z[2*S+1])}function ue(p,S){for(var Z=0;Z|=1&p,p>>>=1,Z<<=1,0<--S;);return Z>>>1}function W(p,S,Z){var $,I,Y=new Array(m+1),R=0;for($=1;$<=m;$++)Y[$]=R=R+Z[$-1]<<1;for(I=0;I<=S;I++){var F=p[2*I+1];F!==0&&(p[2*I]=ue(Y[F]++,F))}}function X(p){var S;for(S=0;S<g;S++)p.dyn_ltree[2*S]=0;for(S=0;S<l;S++)p.dyn_dtree[2*S]=0;for(S=0;S<_;S++)p.bl_tree[2*S]=0;p.dyn_ltree[2*A]=1,p.opt_len=p.static_len=0,p.last_lit=p.matches=0}function ee(p){8<p.bi_valid?ne(p,p.bi_buf):0<p.bi_valid&&(p.pending_buf[p.pending++]=p.bi_buf),p.bi_buf=0,p.bi_valid=0}function de(p,S,Z,$){var I=2*S,Y=2*Z;return p[I]<p[Y]||p[I]===p[Y]&&$[S]<=$[Z]}function oe(p,S,Z){for(var $=p.heap[Z],I=Z<<1;I<=p.heap_len&&(I<p.heap_len&&de(S,p.heap[I+1],p.heap[I],p.depth)&&I++,!de(S,$,p.heap[I],p.depth));)p.heap[Z]=p.heap[I],Z=I,I<<=1;p.heap[Z]=$}function ce(p,S,Z){var $,I,Y,R,F=0;if(p.last_lit!==0)for(;$=p.pending_buf[p.d_buf+2*F]<<8|p.pending_buf[p.d_buf+2*F+1],I=p.pending_buf[p.l_buf+F],F++,$===0?V(p,I,S):(V(p,(Y=r[I])+v+1,S),(R=P[Y])!==0&&J(p,I-=B[Y],R),V(p,Y=z(--$),Z),(R=H[Y])!==0&&J(p,$-=G[Y],R)),F<p.last_lit;);V(p,A,S)}function pe(p,S){var Z,$,I,Y=S.dyn_tree,R=S.stat_desc.static_tree,F=S.stat_desc.has_stree,Q=S.stat_desc.elems,le=-1;for(p.heap_len=0,p.heap_max=c,Z=0;Z<Q;Z++)Y[2*Z]!==0?(p.heap[++p.heap_len]=le=Z,p.depth[Z]=0):Y[2*Z+1]=0;for(;p.heap_len<2;)Y[2*(I=p.heap[++p.heap_len]=le<2?++le:0)]=1,p.depth[I]=0,p.opt_len--,F&&(p.static_len-=R[2*I+1]);for(S.max_code=le,Z=p.heap_len>>1;1<=Z;Z--)oe(p,Y,Z);for(I=Q;Z=p.heap[1],p.heap[1]=p.heap[p.heap_len--],oe(p,Y,1),$=p.heap[1],p.heap[--p.heap_max]=Z,p.heap[--p.heap_max]=$,Y[2*I]=Y[2*Z]+Y[2*$],p.depth[I]=(p.depth[Z]>=p.depth[$]?p.depth[Z]:p.depth[$])+1,Y[2*Z+1]=Y[2*$+1]=I,p.heap[1]=I++,oe(p,Y,1),2<=p.heap_len;);p.heap[--p.heap_max]=p.heap[1],function(ie,be){var ye,xe,_e,he,ke,Ee,ve=be.dyn_tree,Ce=be.max_code,ze=be.stat_desc.static_tree,Ge=be.stat_desc.has_stree,Ut=be.stat_desc.extra_bits,rt=be.stat_desc.extra_base,De=be.stat_desc.max_length,Te=0;for(he=0;he<=m;he++)ie.bl_count[he]=0;for(ve[2*ie.heap[ie.heap_max]+1]=0,ye=ie.heap_max+1;ye<c;ye++)De<(he=ve[2*ve[2*(xe=ie.heap[ye])+1]+1]+1)&&(he=De,Te++),ve[2*xe+1]=he,Ce<xe||(ie.bl_count[he]++,ke=0,rt<=xe&&(ke=Ut[xe-rt]),Ee=ve[2*xe],ie.opt_len+=Ee*(he+ke),Ge&&(ie.static_len+=Ee*(ze[2*xe+1]+ke)));if(Te!==0){do{for(he=De-1;ie.bl_count[he]===0;)he--;ie.bl_count[he]--,ie.bl_count[he+1]+=2,ie.bl_count[De]--,Te-=2}while(0<Te);for(he=De;he!==0;he--)for(xe=ie.bl_count[he];xe!==0;)Ce<(_e=ie.heap[--ye])||(ve[2*_e+1]!==he&&(ie.opt_len+=(he-ve[2*_e+1])*ve[2*_e],ve[2*_e+1]=he),xe--)}}(p,S),W(Y,le,p.bl_count)}function e(p,S,Z){var $,I,Y=-1,R=S[1],F=0,Q=7,le=4;for(R===0&&(Q=138,le=3),S[2*(Z+1)+1]=65535,$=0;$<=Z;$++)I=R,R=S[2*($+1)+1],++F<Q&&I===R||(F<le?p.bl_tree[2*I]+=F:I!==0?(I!==Y&&p.bl_tree[2*I]++,p.bl_tree[2*N]++):F<=10?p.bl_tree[2*E]++:p.bl_tree[2*M]++,Y=I,le=(F=0)===R?(Q=138,3):I===R?(Q=6,3):(Q=7,4))}function L(p,S,Z){var $,I,Y=-1,R=S[1],F=0,Q=7,le=4;for(R===0&&(Q=138,le=3),$=0;$<=Z;$++)if(I=R,R=S[2*($+1)+1],!(++F<Q&&I===R)){if(F<le)for(;V(p,I,p.bl_tree),--F!=0;);else I!==0?(I!==Y&&(V(p,I,p.bl_tree),F--),V(p,N,p.bl_tree),J(p,F-3,2)):F<=10?(V(p,E,p.bl_tree),J(p,F-3,3)):(V(p,M,p.bl_tree),J(p,F-11,7));Y=I,le=(F=0)===R?(Q=138,3):I===R?(Q=6,3):(Q=7,4)}}f(G);var C=!1;function x(p,S,Z,$){J(p,(u<<1)+($?1:0),3),function(I,Y,R,F){ee(I),ne(I,R),ne(I,~R),n.arraySet(I.pending_buf,I.window,Y,R,I.pending),I.pending+=R}(p,S,Z)}d._tr_init=function(p){C||(function(){var S,Z,$,I,Y,R=new Array(m+1);for(I=$=0;I<w-1;I++)for(B[I]=$,S=0;S<1<<P[I];S++)r[$++]=I;for(r[$-1]=I,I=Y=0;I<16;I++)for(G[I]=Y,S=0;S<1<<H[I];S++)T[Y++]=I;for(Y>>=7;I<l;I++)for(G[I]=Y<<7,S=0;S<1<<H[I]-7;S++)T[256+Y++]=I;for(Z=0;Z<=m;Z++)R[Z]=0;for(S=0;S<=143;)q[2*S+1]=8,S++,R[8]++;for(;S<=255;)q[2*S+1]=9,S++,R[9]++;for(;S<=279;)q[2*S+1]=7,S++,R[7]++;for(;S<=287;)q[2*S+1]=8,S++,R[8]++;for(W(q,g+1,R),S=0;S<l;S++)j[2*S+1]=5,j[2*S]=ue(S,5);ae=new re(q,P,v+1,g,m),K=new re(j,H,0,l,m),se=new re(new Array(0),O,0,_,k)}(),C=!0),p.l_desc=new D(p.dyn_ltree,ae),p.d_desc=new D(p.dyn_dtree,K),p.bl_desc=new D(p.bl_tree,se),p.bi_buf=0,p.bi_valid=0,X(p)},d._tr_stored_block=x,d._tr_flush_block=function(p,S,Z,$){var I,Y,R=0;0<p.level?(p.strm.data_type===2&&(p.strm.data_type=function(F){var Q,le=4093624447;for(Q=0;Q<=31;Q++,le>>>=1)if(1&le&&F.dyn_ltree[2*Q]!==0)return s;if(F.dyn_ltree[18]!==0||F.dyn_ltree[20]!==0||F.dyn_ltree[26]!==0)return a;for(Q=32;Q<v;Q++)if(F.dyn_ltree[2*Q]!==0)return a;return s}(p)),pe(p,p.l_desc),pe(p,p.d_desc),R=function(F){var Q;for(e(F,F.dyn_ltree,F.l_desc.max_code),e(F,F.dyn_dtree,F.d_desc.max_code),pe(F,F.bl_desc),Q=_-1;3<=Q&&F.bl_tree[2*U[Q]+1]===0;Q--);return F.opt_len+=3*(Q+1)+5+5+4,Q}(p),I=p.opt_len+3+7>>>3,(Y=p.static_len+3+7>>>3)<=I&&(I=Y)):I=Y=Z+5,Z+4<=I&&S!==-1?x(p,S,Z,$):p.strategy===4||Y===I?(J(p,2+($?1:0),3),ce(p,q,j)):(J(p,4+($?1:0),3),function(F,Q,le,ie){var be;for(J(F,Q-257,5),J(F,le-1,5),J(F,ie-4,4),be=0;be<ie;be++)J(F,F.bl_tree[2*U[be]+1],3);L(F,F.dyn_ltree,Q-1),L(F,F.dyn_dtree,le-1)}(p,p.l_desc.max_code+1,p.d_desc.max_code+1,R+1),ce(p,p.dyn_ltree,p.dyn_dtree)),X(p),$&&ee(p)},d._tr_tally=function(p,S,Z){return p.pending_buf[p.d_buf+2*p.last_lit]=S>>>8&255,p.pending_buf[p.d_buf+2*p.last_lit+1]=255&S,p.pending_buf[p.l_buf+p.last_lit]=255&Z,p.last_lit++,S===0?p.dyn_ltree[2*Z]++:(p.matches++,S--,p.dyn_ltree[2*(r[Z]+v+1)]++,p.dyn_dtree[2*z(S)]++),p.last_lit===p.lit_bufsize-1},d._tr_align=function(p){J(p,2,3),V(p,A,q),function(S){S.bi_valid===16?(ne(S,S.bi_buf),S.bi_buf=0,S.bi_valid=0):8<=S.bi_valid&&(S.pending_buf[S.pending++]=255&S.bi_buf,S.bi_buf>>=8,S.bi_valid-=8)}(p)}},{"../utils/common":41}],53:[function(t,y,d){y.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,y,d){(function(n){(function(s,a){if(!s.setImmediate){var f,u,w,v,g=1,l={},_=!1,c=s.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(s);m=m&&m.setTimeout?m:s,f={}.toString.call(s.process)==="[object process]"?function(N){process.nextTick(function(){k(N)})}:function(){if(s.postMessage&&!s.importScripts){var N=!0,E=s.onmessage;return s.onmessage=function(){N=!1},s.postMessage("","*"),s.onmessage=E,N}}()?(v="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",A,!1):s.attachEvent("onmessage",A),function(N){s.postMessage(v+N,"*")}):s.MessageChannel?((w=new MessageChannel).port1.onmessage=function(N){k(N.data)},function(N){w.port2.postMessage(N)}):c&&"onreadystatechange"in c.createElement("script")?(u=c.documentElement,function(N){var E=c.createElement("script");E.onreadystatechange=function(){k(N),E.onreadystatechange=null,u.removeChild(E),E=null},u.appendChild(E)}):function(N){setTimeout(k,0,N)},m.setImmediate=function(N){typeof N!="function"&&(N=new Function(""+N));for(var E=new Array(arguments.length-1),M=0;M<E.length;M++)E[M]=arguments[M+1];var P={callback:N,args:E};return l[g]=P,f(g),g++},m.clearImmediate=h}function h(N){delete l[N]}function k(N){if(_)setTimeout(k,0,N);else{var E=l[N];if(E){_=!0;try{(function(M){var P=M.callback,H=M.args;switch(H.length){case 0:P();break;case 1:P(H[0]);break;case 2:P(H[0],H[1]);break;case 3:P(H[0],H[1],H[2]);break;default:P.apply(a,H)}})(E)}finally{h(N),_=!1}}}}function A(N){N.source===s&&typeof N.data=="string"&&N.data.indexOf(v)===0&&k(+N.data.slice(v.length))}})(typeof self>"u"?n===void 0?this:n:self)}).call(this,typeof Se<"u"?Se:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Tt);var Jr=Tt.exports;const Xr=xt(Jr);var Bt={exports:{}};(function(i,b){(function(t,y){y()})(Se,function(){function t(u,w){return typeof w>"u"?w={autoBom:!1}:typeof w!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),w={autoBom:!w}),w.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u}function y(u,w,v){var g=new XMLHttpRequest;g.open("GET",u),g.responseType="blob",g.onload=function(){f(g.response,w,v)},g.onerror=function(){console.error("could not download file")},g.send()}function d(u){var w=new XMLHttpRequest;w.open("HEAD",u,!1);try{w.send()}catch{}return 200<=w.status&&299>=w.status}function n(u){try{u.dispatchEvent(new MouseEvent("click"))}catch{var w=document.createEvent("MouseEvents");w.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),u.dispatchEvent(w)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Se=="object"&&Se.global===Se?Se:void 0,a=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(u,w,v){var g=s.URL||s.webkitURL,l=document.createElement("a");w=w||u.name||"download",l.download=w,l.rel="noopener",typeof u=="string"?(l.href=u,l.origin===location.origin?n(l):d(l.href)?y(u,w,v):n(l,l.target="_blank")):(l.href=g.createObjectURL(u),setTimeout(function(){g.revokeObjectURL(l.href)},4e4),setTimeout(function(){n(l)},0))}:"msSaveOrOpenBlob"in navigator?function(u,w,v){if(w=w||u.name||"download",typeof u!="string")navigator.msSaveOrOpenBlob(t(u,v),w);else if(d(u))y(u,w,v);else{var g=document.createElement("a");g.href=u,g.target="_blank",setTimeout(function(){n(g)})}}:function(u,w,v,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof u=="string")return y(u,w,v);var l=u.type==="application/octet-stream",_=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||l&&_||a)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var A=m.result;A=c?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=A:location=A,g=null},m.readAsDataURL(u)}else{var h=s.URL||s.webkitURL,k=h.createObjectURL(u);g?g.location=k:location.href=k,g=null,setTimeout(function(){h.revokeObjectURL(k)},4e4)}});s.saveAs=f.saveAs=f,i.exports=f})})(Bt);var Qr=Bt.exports;function en({images:i,onDelete:b}){const[t,y]=te.useState("grid"),[d,n]=te.useState(!1),s=i.filter(u=>u.processedFile),a=s.length>0,f=async()=>{if(a){n(!0);try{const u=new Xr;for(const v of s)if(v.processedFile){const g=`${v.file.name.split(".")[0]}-bg-removed.png`;u.file(g,await v.processedFile.arrayBuffer())}const w=await u.generateAsync({type:"blob"});Qr.saveAs(w,"抠图宝-批量抠图.zip")}catch(u){console.error("下载出错:",u)}finally{n(!1)}}};return o.jsxs("div",{children:[i.length>0&&o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("div",{className:"text-gray-700 font-medium",children:["已处理: ",o.jsx("span",{className:"text-pink-500",children:s.length}),"/",i.length]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-1 flex",children:[o.jsx("button",{onClick:()=>y("grid"),className:`px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors ${t==="grid"?"bg-pink-50 text-pink-600":"text-gray-500 hover:text-gray-700"}`,title:"卡片视图",children:o.jsx("i",{className:"fas fa-th-large"})}),o.jsx("button",{onClick:()=>y("list"),className:`px-3 py-1.5 rounded-md flex items-center gap-1.5 transition-colors ${t==="list"?"bg-pink-50 text-pink-600":"text-gray-500 hover:text-gray-700"}`,title:"列表视图",children:o.jsx("i",{className:"fas fa-list"})})]}),o.jsx("button",{onClick:f,disabled:!a||d,className:`px-4 py-2 rounded-full flex items-center gap-1.5 transition-colors ${a&&!d?"bg-gradient-to-r from-pink-500 to-purple-600 text-white shadow-sm hover:opacity-90":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-spinner fa-spin"}),o.jsx("span",{children:"处理中..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"fas fa-download"}),o.jsx("span",{children:"下载全部"})]})})]})]}),t==="grid"?o.jsx("div",{className:"gap-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:i.map(u=>u.file.type.includes("video")?o.jsx(tn,{video:u},u.id):o.jsx(nn,{image:u,onDelete:b},u.id))}):o.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:i.length===0?o.jsxs("div",{className:"p-6 text-center text-gray-500",children:[o.jsx("i",{className:"fas fa-image text-3xl mb-2 text-gray-300"}),o.jsx("p",{children:"暂无图片"})]}):o.jsx("div",{className:"divide-y divide-gray-100",children:i.map(u=>u.file.type.includes("video")?o.jsx(rn,{video:u},u.id):o.jsx(an,{image:u,onDelete:b},u.id))})})]})}function tn({video:i}){const b=URL.createObjectURL(i.file);return o.jsx("div",{className:"bg-white rounded-lg shadow-md p-3",children:o.jsx("video",{className:"rounded-lg aspect-square object-cover",loop:!0,muted:!0,autoPlay:!0,src:b})})}function rn({video:i}){const b=URL.createObjectURL(i.file);return o.jsxs("div",{className:"p-3 flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-md overflow-hidden bg-gray-100 flex-shrink-0",children:o.jsx("video",{className:"w-full h-full object-cover",loop:!0,muted:!0,autoPlay:!0,src:b})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:i.file.name}),o.jsx("p",{className:"text-xs text-gray-500",children:Lt(i.file.size)})]}),o.jsx("div",{className:"text-gray-400",children:o.jsx("i",{className:"fas fa-film"})})]})}function nn({image:i,onDelete:b}){const[t,y]=te.useState(!1),[d,n]=te.useState(""),s=URL.createObjectURL(i.file),a=i.processedFile?URL.createObjectURL(i.processedFile):"",f=!i.processedFile,u=v=>{n(v)};return o.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[o.jsx("div",{className:"relative",children:f?o.jsxs("div",{className:"relative",children:[o.jsx("img",{className:"w-full aspect-square object-cover opacity-50 transition-opacity duration-200",src:s,alt:`Processing image ${i.id}`}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsxs("div",{className:"bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-white mr-2"}),o.jsx("span",{className:"text-white font-medium",children:"处理中..."})]})})]}):o.jsx("div",{className:"w-full aspect-square",style:{background:'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURb+/v////5nD/3QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAUSURBVBjTYwABQSCglEENMxgYGAAynwRB8BEAgQAAAABJRU5ErkJggg==")',backgroundRepeat:"repeat"},children:o.jsx("img",{className:"w-full h-full object-cover transition-opacity duration-200",src:d||a,alt:`Processed image ${i.id}`})})}),!f&&o.jsx("div",{className:"p-3 border-t border-gray-100",children:o.jsxs("div",{className:"flex justify-center gap-2",children:[o.jsxs("button",{onClick:()=>b(i.id),className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",title:"Delete",children:[o.jsx("svg",{className:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),o.jsx("span",{className:"text-sm text-gray-700",children:"删除"})]}),o.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",title:"Edit",children:[o.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),o.jsx("span",{className:"text-sm text-gray-700",children:"编辑"})]}),o.jsxs("a",{href:d||a,download:`processed-${i.id}.png`,className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-gray-200 rounded-md hover:bg-gray-50 transition-colors",title:"Download",children:[o.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),o.jsx("span",{className:"text-sm text-gray-700",children:"下载"})]})]})}),o.jsx(Pt,{image:i,isOpen:t,onClose:()=>y(!1),onSave:u})]})}function an({image:i,onDelete:b}){const[t,y]=te.useState(!1),[d,n]=te.useState(""),s=URL.createObjectURL(i.file),a=i.processedFile?URL.createObjectURL(i.processedFile):"",f=!i.processedFile,u=v=>{n(v)};return o.jsxs("div",{className:"p-3 flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-md overflow-hidden flex-shrink-0",style:{background:f?"none":'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURb+/v////5nD/3QAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAUSURBVBjTYwABQSCglEENMxgYGAAynwRB8BEAgQAAAABJRU5ErkJggg==")',backgroundRepeat:"repeat"},children:f?o.jsxs("div",{className:"relative w-full h-full",children:[o.jsx("img",{className:"w-full h-full object-cover opacity-50",src:s,alt:`Processing image ${i.id}`}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-pink-500"})})]}):o.jsx("img",{className:"w-full h-full object-cover",src:d||a,alt:`Processed image ${i.id}`})}),o.jsxs("div",{className:"flex-grow",children:[o.jsx("p",{className:"text-sm font-medium text-gray-700 truncate",children:i.file.name}),o.jsx("p",{className:"text-xs text-gray-500",children:Lt(i.file.size)})]}),!f&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>b(i.id),className:"w-8 h-8 flex items-center justify-center rounded-full text-red-500 hover:bg-red-50 transition-colors",title:"删除",children:o.jsx("i",{className:"fas fa-trash-alt text-sm"})}),o.jsx("button",{onClick:()=>y(!0),className:"w-8 h-8 flex items-center justify-center rounded-full text-blue-500 hover:bg-blue-50 transition-colors",title:"编辑",children:o.jsx("i",{className:"fas fa-edit text-sm"})}),o.jsx("a",{href:d||a,download:`processed-${i.id}.png`,className:"w-8 h-8 flex items-center justify-center rounded-full text-green-500 hover:bg-green-50 transition-colors",title:"下载",children:o.jsx("i",{className:"fas fa-download text-sm"})})]}),o.jsx(Pt,{image:i,isOpen:t,onClose:()=>y(!1),onSave:u})]})}function Lt(i){if(i===0)return"0 Bytes";const b=1024,t=["Bytes","KB","MB","GB"],y=Math.floor(Math.log(i)/Math.log(b));return parseFloat((i/Math.pow(b,y)).toFixed(2))+" "+t[y]}const Re="Xenova/modnet",je="briaai/RMBG-1.4",sn=()=>["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,ge={model:null,processor:null,isWebGPUSupported:!1,currentModelId:je,isIOS:sn()};async function on(){const i=navigator.gpu;if(!i)return!1;try{return await i.requestAdapter()?(Ae.allowLocalModels=!1,Ae.backends?.onnx?.wasm&&(Ae.backends.onnx.wasm.proxy=!1),await new Promise(t=>setTimeout(t,100)),ge.model=await Ke.from_pretrained(Re,{device:"webgpu",config:{model_type:"modnet",architectures:["MODNet"]}}),ge.processor=await Ye.from_pretrained(Re),ge.isWebGPUSupported=!0,!0):!1}catch(b){return console.error("WebGPU initialization failed:",b),!1}}async function et(i){try{if(ge.isIOS)return console.log("iOS detected, using RMBG-1.4 model"),Ae.allowLocalModels=!1,Ae.backends?.onnx?.wasm&&(Ae.backends.onnx.wasm.proxy=!0),ge.model=await Ke.from_pretrained(je,{config:{model_type:"custom"}}),ge.processor=await Ye.from_pretrained(je,{config:{do_normalize:!0,do_pad:!1,do_rescale:!0,do_resize:!0,image_mean:[.5,.5,.5],feature_extractor_type:"ImageFeatureExtractor",image_std:[1,1,1],resample:2,rescale_factor:.00392156862745098,size:{width:1024,height:1024}}}),ge.currentModelId=je,!0;const b=i||je;if(b===Re&&await on())return ge.currentModelId=Re,!0;if(Ae.allowLocalModels=!1,Ae.backends?.onnx?.wasm&&(Ae.backends.onnx.wasm.proxy=!0),ge.model=await Ke.from_pretrained(je,{progress_callback:t=>{console.log(`Loading model: ${Math.round(t*100)}%`)}}),ge.processor=await Ye.from_pretrained(je,{revision:"main",config:{do_normalize:!0,do_pad:!0,do_rescale:!0,do_resize:!0,image_mean:[.5,.5,.5],feature_extractor_type:"ImageFeatureExtractor",image_std:[.5,.5,.5],resample:2,rescale_factor:.00392156862745098,size:{width:1024,height:1024}}}),ge.currentModelId=je,!ge.model||!ge.processor)throw new Error("Failed to initialize model or processor");return ge.currentModelId=b,!0}catch(b){if(console.error("Error initializing model:",b),i===Re)return console.log("Falling back to cross-browser model..."),et(je);throw new Error(b instanceof Error?b.message:"Failed to initialize background removal model")}}function bt(){return{currentModelId:ge.currentModelId,isWebGPUSupported:!!navigator.gpu,isIOS:ge.isIOS}}async function ln(i){if(!ge.model||!ge.processor)throw new Error("Model not initialized. Call initializeModel() first.");const b=await nt.fromURL(URL.createObjectURL(i));try{const{pixel_values:t}=await ge.processor(b),{output:y}=await ge.model({input:t}),d=(await nt.fromTensor(y[0].mul(255).to("uint8")).resize(b.width,b.height)).data,n=document.createElement("canvas");n.width=b.width,n.height=b.height;const s=n.getContext("2d");if(!s)throw new Error("Could not get 2d context");s.drawImage(b.toCanvas(),0,0);const a=s.getImageData(0,0,b.width,b.height);for(let v=0;v<d.length;++v)a.data[4*v+3]=d[v];s.putImageData(a,0,0);const f=await new Promise((v,g)=>n.toBlob(l=>l?v(l):g(new Error("Failed to create blob")),"image/png")),[u]=i.name.split(".");return new File([f],`${u}-bg-blasted.png`,{type:"image/png"})}catch(t){throw console.error("Error processing image:",t),new Error("Failed to process image")}}async function cn(i){console.log("Processing images...");const b=[];for(const t of i)try{const y=await ln(t);b.push(y),console.log("Successfully processed image",t.name)}catch(y){console.error("Error processing image",t.name,y)}return console.log("Processing images done"),b}const dn=["http://images.unsplash.com/photo-1618886614638-80e3c103d31a?q=80&w=1920&auto=format&fit=crop&ixlib=rb-4.0.3","http://images.unsplash.com/photo-1437622368342-7a3d73a34c8f?q=80&w=1920&auto=format&fit=crop&ixlib=rb-4.0.3","http://images.unsplash.com/photo-1583337130417-3346a1be7dee?q=80&w=2688&auto=format&fit=crop&ixlib=rb-4.0.3","http://images.unsplash.com/photo-1588516903720-8ceb67f9ef84?q=80&w=3144&auto=format&fit=crop&ixlib=rb-4.0.3"],un=()=>{const i=window.navigator.userAgent,b=!!i.match(/iPad/i)||!!i.match(/iPhone/i),t=!!i.match(/WebKit/i);return b&&t&&!i.match(/CriOS/i)&&!i.match(/OPiOS/i)&&!i.match(/FxiOS/i)&&"ontouchend"in document},fn=[{icon:"magic",title:"智能抠图",description:"先进的AI技术，一键去除任何图片背景，无需手动操作"},{icon:"shield-alt",title:"隐私保障",description:"所有处理在本地完成，图片不会上传到任何服务器"},{icon:"paint-brush",title:"自定义背景",description:"轻松更换背景颜色或图片，打造完美效果"},{icon:"download",title:"高质量导出",description:"支持透明背景PNG格式导出，满足各种专业需求"}];function hn(){const[i,b]=te.useState(!0),[t,y]=te.useState(null),[d,n]=te.useState(!1),[s,a]=te.useState(!1),[f,u]=te.useState("briaai/RMBG-1.4"),[w,v]=te.useState(!1),[g,l]=te.useState([]),[_,c]=te.useState("home");te.useEffect(()=>{if(un()){window.location.href="http://cuttypic.luhui.net";return}const{isIOS:O}=bt();a(O),b(!1)},[]);const m=async O=>{const U=O.target.value;v(!0),y(null);try{if(!await et(U))throw new Error("Failed to initialize new model");u(U)}catch(q){q instanceof Error&&q.message.includes("Falling back")?u("briaai/RMBG-1.4"):y({message:q instanceof Error?q.message:"Failed to switch models"})}finally{v(!1)}},h=te.useCallback(async O=>{const U=O.map((q,j)=>({id:Date.now()+j,file:q,processedFile:void 0}));if(l(q=>[...q,...U]),g.length===0){b(!0),y(null);try{if(!await et())throw new Error("Failed to initialize background removal model");const{isWebGPUSupported:j}=bt();n(j)}catch(q){y({message:q instanceof Error?q.message:"An unknown error occurred"}),l([]),b(!1);return}b(!1)}for(const q of U)try{const j=await cn([q.file]);j&&j.length>0&&l(T=>T.map(r=>r.id===q.id?{...r,processedFile:j[0]}:r))}catch(j){console.error("Error processing image:",j)}},[g.length]),k=async O=>{const U=O.clipboardData.items,q=[];for(const j of U)if(j.type.startsWith("image")){const T=j.getAsFile();T&&q.push(T)}q.length>0&&h(q)},A=async O=>{try{const q=await(await fetch(O)).blob(),j=new File([q],"sample-image.jpg",{type:"image/jpeg"});h([j])}catch(U){console.error("Error loading sample image:",U)}},{getRootProps:N,getInputProps:E,isDragActive:M,isDragAccept:P,isDragReject:H}=Ft({onDrop:h,accept:{"image/*":[".jpeg",".jpg",".png",".mp4"]}});return o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-blue-50",onPaste:k,children:[o.jsx("nav",{className:"bg-white shadow-md",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"flex items-center justify-between h-16",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsxs("a",{href:"/",className:"flex items-center gap-2 hover:opacity-90 transition-opacity",children:[o.jsx("img",{src:"/favicon.ico",alt:"抠图宝",className:"w-8 h-8"}),o.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"抠图宝"})]})}),o.jsx("div",{className:"hidden md:block",children:o.jsxs("div",{className:"ml-10 flex items-center space-x-4",children:[o.jsxs("button",{onClick:()=>c("home"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${_==="home"?"text-pink-500":"text-gray-600 hover:text-pink-500"}`,children:[o.jsx("i",{className:"fas fa-home mr-1"})," 首页"]}),o.jsxs("button",{onClick:()=>window.location.href="/guide.html",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${_==="guide"?"text-pink-500":"text-gray-600 hover:text-pink-500"}`,children:[o.jsx("i",{className:"fas fa-book mr-1"})," 使用指南"]}),o.jsxs("button",{onClick:()=>window.location.href="/about.html",className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${_==="about"?"text-pink-500":"text-gray-600 hover:text-pink-500"}`,children:[o.jsx("i",{className:"fas fa-info-circle mr-1"})," 关于我们"]})]})})]}),!s&&o.jsxs("div",{className:"flex items-center gap-2 bg-gray-100 px-3 py-1.5 rounded-full",children:[o.jsx("i",{className:"fas fa-microchip text-purple-500"}),o.jsx("span",{className:"text-gray-600 text-sm",children:"模型:"}),o.jsxs("select",{value:f,onChange:m,className:"bg-white border border-gray-200 rounded-full px-3 py-1 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-pink-500 focus:border-pink-500 shadow-sm",disabled:!d,children:[o.jsx("option",{value:"briaai/RMBG-1.4",children:"RMBG-1.4 (通用版)"}),d&&o.jsx("option",{value:"Xenova/modnet",children:"MODNet (WebGPU版)"})]})]})]}),s&&o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"使用针对iOS优化的抠图模型"})]})}),o.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:g.length===0?o.jsxs("div",{className:"space-y-12",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-center",children:[o.jsxs("div",{className:"flex flex-col justify-center",children:[o.jsxs("div",{className:"inline-block bg-pink-100 text-pink-800 px-4 py-1 rounded-full text-sm font-medium mb-4",children:[o.jsx("i",{className:"fas fa-star text-yellow-500 mr-1"})," 智能抠图工具"]}),o.jsxs("h2",{className:"text-4xl font-extrabold text-gray-800 mb-4 leading-tight",children:["智能一键抠图，",o.jsx("br",{}),o.jsx("span",{className:"bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"让创作更简单"})]}),o.jsx("p",{className:"text-lg text-gray-600 mb-6",children:"100% 自动处理，完全免费，无需注册"}),o.jsx("p",{className:"text-gray-500 mb-6",children:"上传您的图片，让我们的AI立即去除背景。适用于专业照片、产品图片等多种场景。"}),o.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[o.jsx("i",{className:"fas fa-shield-alt text-green-500 mr-1"}),o.jsx("span",{children:"所有处理在本地完成，保障您的隐私安全"})]})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -top-6 -left-6 w-24 h-24 bg-yellow-200 rounded-full opacity-50"}),o.jsx("div",{className:"absolute -bottom-6 -right-6 w-32 h-32 bg-pink-200 rounded-full opacity-50"}),o.jsx("img",{src:"hero.gif",alt:"抠图示例",className:"relative z-10 rounded-2xl shadow-xl w-full object-cover h-[400px]"})]})]}),o.jsxs("div",{...N(),className:`p-10 border-3 border-dashed rounded-2xl text-center cursor-pointer transition-all duration-300 ease-in-out bg-white shadow-sm hover:shadow-md relative overflow-hidden
                ${P?"border-green-500 bg-green-50":""}
                ${H?"border-red-500 bg-red-50":""}
                ${M?"border-blue-500 bg-blue-50":"border-pink-300 hover:border-pink-500 hover:bg-pink-50"}
                ${i||w?"cursor-not-allowed":""}
              `,children:[o.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-purple-100 rounded-full opacity-30"}),o.jsx("div",{className:"absolute -bottom-10 -left-10 w-40 h-40 bg-pink-100 rounded-full opacity-30"}),o.jsx("input",{...E(),className:"hidden",disabled:i||w}),o.jsx("div",{className:"flex flex-col items-center gap-4 relative z-10",children:i||w?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-pink-600 mb-2"}),o.jsx("p",{className:"text-xl text-gray-600 font-medium",children:w?"正在切换模型...":"正在加载抠图模型..."}),o.jsx("p",{className:"text-sm text-gray-500 max-w-md mx-auto",children:"首次加载可能需要一些时间，请耐心等待"})]}):t?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-20 h-20 rounded-full bg-red-100 flex items-center justify-center mb-2",children:o.jsx("i",{className:"fas fa-exclamation-triangle text-3xl text-red-500"})}),o.jsx("p",{className:"text-xl text-red-600 font-medium mb-2",children:t.message}),f==="Xenova/modnet"&&o.jsxs("button",{onClick:O=>{O.stopPropagation(),m({target:{value:"briaai/RMBG-1.4"}})},className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full hover:opacity-90 transition-opacity shadow-md",children:[o.jsx("i",{className:"fas fa-sync-alt mr-2"}),"切换到通用版本"]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-24 h-24 rounded-full bg-pink-100 flex items-center justify-center mb-4",children:o.jsx("i",{className:"fas fa-cloud-upload-alt text-4xl text-pink-500"})}),o.jsx("p",{className:"text-2xl font-medium text-gray-700 mb-2",children:M?"松开鼠标上传图片...":"拖拽图片到这里上传"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"或"}),o.jsxs("button",{className:"px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-600 text-white rounded-full hover:opacity-90 transition-opacity shadow-md",children:[o.jsx("i",{className:"fas fa-image mr-2"}),"选择文件"]}),o.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"支持 JPG、PNG、JPEG 格式"})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm",children:[o.jsxs("h3",{className:"text-xl text-gray-700 font-semibold mb-6 flex items-center",children:[o.jsx("i",{className:"fas fa-images text-purple-500 mr-2"}),"没有图片？试试这些:"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:dn.map((O,U)=>o.jsxs("button",{onClick:()=>A(O),className:"relative aspect-square overflow-hidden rounded-xl hover:opacity-90 transition-all focus:outline-none focus:ring-2 focus:ring-pink-500 shadow-sm hover:shadow-md transform hover:-translate-y-1",children:[o.jsx("img",{src:O,alt:`示例 ${U+1}`,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 hover:opacity-100 transition-opacity flex items-end justify-center pb-3",children:o.jsx("span",{className:"text-white text-sm font-medium",children:"使用此图片"})})]},U))}),o.jsxs("p",{className:"text-sm text-gray-500 mt-6 flex items-center",children:[o.jsx("i",{className:"fas fa-lock text-green-500 mr-2"}),"所有图片均在您的设备上本地处理，不会上传到任何服务器。"]})]}),o.jsxs("div",{children:[o.jsxs("h3",{className:"text-2xl font-bold text-center mb-8 text-gray-800",children:[o.jsx("span",{className:"bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"强大功能"}),"，简单操作"]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:fn.map((O,U)=>o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow border border-gray-100",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-pink-100 flex items-center justify-center mb-4",children:o.jsx("i",{className:`fas fa-${O.icon} text-2xl text-pink-500`})}),o.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:O.title}),o.jsx("p",{className:"text-gray-600",children:O.description})]},U))})]}),o.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-8 shadow-sm",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex-shrink-0 flex items-center justify-center",children:o.jsx("i",{className:"fas fa-lightbulb text-2xl text-yellow-500"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"小贴士：为什么抠图可能需要一些时间？"}),o.jsxs("div",{className:"space-y-3 text-gray-600",children:[o.jsxs("p",{children:[o.jsx("i",{className:"fas fa-brain text-purple-500 mr-2"})," ",o.jsx("strong",{children:"复杂的AI模型："}),"背景去除模型（如RMBG-1.4）是复杂的深度学习模型，需要大量计算资源。"]}),o.jsxs("p",{children:[o.jsx("i",{className:"fas fa-globe text-blue-500 mr-2"})," ",o.jsx("strong",{children:"浏览器环境限制："}),"在浏览器中运行AI模型受到以下限制：WebAssembly执行速度比原生应用慢，浏览器的内存和计算资源受限。"]}),o.jsxs("p",{children:[o.jsx("i",{className:"fas fa-image text-green-500 mr-2"})," ",o.jsx("strong",{children:"图像大小："}),"处理高分辨率图像需要更多计算资源和时间。"]}),o.jsxs("p",{children:[o.jsx("i",{className:"fas fa-laptop text-red-500 mr-2"})," ",o.jsx("strong",{children:"设备性能："}),"用户设备的CPU/GPU性能直接影响处理速度。"]})]})]})]})})]}):o.jsxs("div",{className:"w-full",children:[o.jsx("div",{className:"mb-8",children:o.jsxs("div",{...N(),className:`p-6 border-2 border-dashed rounded-xl text-center cursor-pointer transition-all duration-300 ease-in-out bg-white shadow-sm hover:shadow-md relative overflow-hidden
                  ${P?"border-green-500 bg-green-50":""}
                  ${H?"border-red-500 bg-red-50":""}
                  ${M?"border-blue-500 bg-blue-50":"border-pink-300 hover:border-pink-500 hover:bg-pink-50"}
                  ${i||w?"cursor-not-allowed":""}
                `,children:[o.jsx("div",{className:"absolute -top-8 -right-8 w-24 h-24 bg-purple-100 rounded-full opacity-30"}),o.jsx("div",{className:"absolute -bottom-8 -left-8 w-24 h-24 bg-pink-100 rounded-full opacity-30"}),o.jsx("input",{...E(),className:"hidden",disabled:i||w}),o.jsxs("div",{className:"flex items-center justify-center gap-4 relative z-10",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-pink-100 flex items-center justify-center",children:o.jsx("i",{className:"fas fa-cloud-upload-alt text-xl text-pink-500"})}),o.jsxs("div",{className:"text-left",children:[o.jsx("p",{className:"text-lg font-medium text-gray-700",children:M?"松开鼠标上传更多图片...":"拖拽图片到这里上传更多图片"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsxs("button",{className:"px-3 py-1.5 bg-gradient-to-r from-pink-500 to-purple-600 text-white text-sm rounded-full hover:opacity-90 transition-opacity shadow-sm",children:[o.jsx("i",{className:"fas fa-image mr-1"}),"选择文件"]}),o.jsx("span",{className:"text-sm text-gray-500",children:"支持 JPG、PNG、JPEG 格式"})]})]})]})]})}),o.jsx(en,{images:g,onDelete:O=>l(U=>U.filter(q=>q.id!==O))})]})}),o.jsx("footer",{className:"bg-white mt-12 border-t border-gray-200",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[o.jsxs("div",{children:[o.jsxs("a",{href:"/",className:"flex items-center gap-2 mb-4 hover:opacity-90 transition-opacity",children:[o.jsx("img",{src:"/favicon-small.png",alt:"抠图宝",className:"w-4 h-4 flex-shrink-0",style:{width:"16px",height:"16px"}}),o.jsx("h3",{className:"text-xl font-bold bg-gradient-to-r from-pink-500 to-purple-600 bg-clip-text text-transparent",children:"抠图宝"})]}),o.jsx("p",{className:"text-gray-500 text-sm",children:"智能一键抠图工具，让创作更简单"}),o.jsxs("div",{className:"flex space-x-4 mt-4",children:[o.jsx("a",{href:"#",className:"text-gray-400 hover:text-pink-500 transition-colors",title:"微信号: kugeceo",children:o.jsx("i",{className:"fab fa-weixin text-xl"})}),o.jsx("a",{href:"http://weibo.com/kugeceo",target:"_blank",className:"text-gray-400 hover:text-pink-500 transition-colors",children:o.jsx("i",{className:"fab fa-weibo text-xl"})}),o.jsx("a",{href:"http://github.com/kugeceo",target:"_blank",className:"text-gray-400 hover:text-pink-500 transition-colors",children:o.jsx("i",{className:"fab fa-github text-xl"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"快速链接"}),o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsx("li",{children:o.jsxs("a",{href:"/",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 首页"]})}),o.jsx("li",{children:o.jsxs("a",{href:"/guide.html",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 使用指南"]})}),o.jsx("li",{children:o.jsxs("a",{href:"/about.html",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 关于我们"]})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"法律信息"}),o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsx("li",{children:o.jsxs("a",{href:"/privacy.html",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 隐私政策"]})}),o.jsx("li",{children:o.jsxs("a",{href:"/terms.html",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 使用条款"]})}),o.jsx("li",{children:o.jsxs("a",{href:"/copyright.html",className:"text-gray-500 hover:text-pink-500 transition-colors flex items-center",children:[o.jsx("i",{className:"fas fa-chevron-right text-xs mr-2 text-pink-300"})," 版权信息"]})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium text-gray-800 mb-4",children:"联系我们"}),o.jsxs("ul",{className:"space-y-2 text-sm",children:[o.jsxs("li",{className:"text-gray-500 flex items-start",children:[o.jsx("i",{className:"fas fa-envelope mt-1 mr-2 text-pink-400"})," info@mail.luhui.net"]}),o.jsxs("li",{className:"text-gray-500 flex items-start",children:[o.jsx("i",{className:"fas fa-map-marker-alt mt-1 mr-2 text-pink-400"})," 太阳系地球村大中华东部战区"]})]})]})]}),o.jsxs("div",{className:"border-t border-gray-200 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center",children:[o.jsxs("p",{className:"text-sm text-gray-500",children:["© ",new Date().getFullYear(),"  -01-11 luhui.net all rights reserved."]}),o.jsxs("p",{className:"text-sm text-gray-400 mt-2 md:mt-0",children:[o.jsx("i",{className:"fas fa-code text-pink-300 mr-1"})," 使用 React + Vite + Tailwind 构建"]})]})]})})]})}console.log("main.jsx");wt(document.getElementById("root")).render(o.jsx(te.StrictMode,{children:o.jsx(hn,{})}));
//# sourceMappingURL=index-ckcntoku.js.map
